<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>BLAZE AND STEEL</title>
    <style>
        /* Vari√°veis de Cores (CSS Custom Properties) */
        :root {
            --color-primary: #1e1e2d;
            --color-secondary: #36364f;
            --color-text: #e0e0e0;
            --color-accent: #f39c12; /* Ouro */
            --color-combat: #c0392b; /* Combate/Aventura */
            --color-evolve: #8e44ad; /* Evoluir/Treinamento */
            --color-soul: #9b59b6; /* Alma/Reencarna√ß√£o */
            --color-hp: #2ecc71; /* HP/Vida */
            --color-mp: #3498db; /* MP/Mana */
            --color-gold: #f39c12; /* Ouro */
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background-color: var(--color-primary);
            color: var(--color-text);
            margin: 0;
            display: flex;
            min-height: 100vh;
            overflow: hidden;
            /* Adicionado: Fundo para o Menu Inicial */
            background-image: url('assets/fundo.jpg'); 
            background-size: cover;
            background-position: center;
        }

        /* Estrutura Geral */
        #app-wrapper {
            display: flex;
            width: 100%;
            height: 100vh;
            background-color: rgba(0, 0, 0, 0.7); /* Overlay escuro */
        }
        
        /* Sidebar (Menu Lateral) */
        .sidebar {
            width: 250px;
            background-color: var(--color-secondary);
            padding: 20px;
            box-shadow: 2px 0 5px rgba(0, 0, 0, 0.5);
            display: none; /* Inicia oculto, ser√° mostrado no jogo */
            flex-direction: column;
            align-items: center;
        }

        .hero-stats h3 {
            margin-top: 0;
            color: var(--color-accent);
        }

        .stat-bar {
            background-color: #555;
            border-radius: 5px;
            margin-bottom: 5px;
            height: 20px;
            overflow: hidden;
            position: relative;
        }

        .bar-fill {
            height: 100%;
            transition: width 0.3s;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: bold;
            font-size: 12px;
            text-shadow: 1px 1px 2px #000;
        }

        .hp-bar .bar-fill { background-color: var(--color-hp); }
        .mp-bar .bar-fill { background-color: var(--color-mp); }
        .exp-bar .bar-fill { background-color: #2c3e50; }

        .sidebar-menu button {
            width: 100%;
            padding: 10px;
            margin-top: 10px;
            background-color: var(--color-primary);
            color: var(--color-text);
            border: 1px solid var(--color-accent);
            border-radius: 5px;
            cursor: pointer;
            transition: background-color 0.2s;
        }

        .sidebar-menu button:hover {
            background-color: var(--color-accent);
            color: var(--color-primary);
        }

        /* Painel Principal */
        .main-content {
            flex-grow: 1;
            padding: 20px;
            overflow-y: auto;
            display: flex;
            flex-direction: column;
            justify-content: flex-start;
            align-items: center;
            display: none; /* Inicia oculto, ser√° mostrado no jogo */
        }

        .panel {
            background-color: var(--color-secondary);
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 0 15px rgba(0, 0, 0, 0.5);
            width: 80%;
            max-width: 800px;
            margin-bottom: 20px;
            display: none; /* Oculto por padr√£o */
        }

        .panel h2 {
            color: var(--color-accent);
            border-bottom: 2px solid var(--color-accent);
            padding-bottom: 10px;
            margin-top: 0;
        }
        
        /* === Menu Inicial === */
        #start-menu {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            display: none; /* Controlado por JS */
            flex-direction: column;
            justify-content: center;
            align-items: center;
            background-color: rgba(0, 0, 0, 0.8);
            z-index: 1000;
        }

        #start-menu img {
            max-width: 400px;
            margin-bottom: 40px;
        }

        #start-menu button {
            width: 200px;
            padding: 15px;
            margin: 10px;
            font-size: 1.2em;
            background-color: var(--color-accent);
            color: var(--color-primary);
            border: none;
            border-radius: 5px;
            cursor: pointer;
            transition: opacity 0.2s;
        }

        #start-menu button:hover {
            opacity: 0.8;
        }

        .disabled {
            opacity: 0.5;
            cursor: not-allowed !important;
        }

        /* === Painel de Combate === */
        #combat-panel {
            text-align: center;
        }
        
        .combat-log {
            height: 200px;
            overflow-y: auto;
            background-color: #111;
            padding: 10px;
            border-radius: 5px;
            margin-top: 10px;
            text-align: left;
        }

        .enemy-info {
            margin-bottom: 15px;
            padding: 10px;
            border: 1px solid var(--color-combat);
            border-radius: 5px;
        }

        .combat-actions button {
            padding: 10px 20px;
            margin: 5px;
            background-color: var(--color-combat);
            color: white;
            border: none;
            border-radius: 5px;
            cursor: pointer;
        }

        /* === Painel de Status === */
        #status-panel .stat-line {
            display: flex;
            justify-content: space-between;
            margin-bottom: 5px;
            border-bottom: 1px dashed var(--color-secondary);
            padding-bottom: 5px;
        }

        .stat-value {
            color: var(--color-accent);
            font-weight: bold;
        }

        /* === Painel de Invent√°rio e Equipamentos === */
        #inventory-panel, #equipment-panel {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
        }

        .item-list, .equipment-list {
            background-color: var(--color-primary);
            padding: 10px;
            border-radius: 5px;
            max-height: 400px;
            overflow-y: auto;
        }

        .item {
            padding: 8px;
            margin-bottom: 5px;
            background-color: var(--color-secondary);
            border-left: 5px solid transparent;
            cursor: pointer;
            transition: background-color 0.1s, border-left-color 0.1s;
        }
        
        .item:hover {
            background-color: #444;
        }

        .item.selected {
            border-left-color: var(--color-accent);
        }

        .item-slot {
            padding: 10px;
            margin-bottom: 10px;
            border: 1px dashed #555;
            border-radius: 5px;
            min-height: 40px;
        }

        .item-slot strong {
            color: var(--color-accent);
        }

        /* Janela de Inspe√ß√£o */
        #inspection-window {
            margin-top: 20px;
            padding: 15px;
            border: 1px solid var(--color-accent);
            border-radius: 5px;
            background-color: #222;
        }

        #inspection-window p {
            margin-top: 5px;
        }

        #inspection-window button {
            padding: 8px 15px;
            margin-top: 10px;
            background-color: var(--color-accent);
            color: var(--color-primary);
            border: none;
            border-radius: 5px;
            cursor: pointer;
        }
        
        .item-stat {
            color: var(--color-hp);
        }
        
        .item-stat.attack {
            color: var(--color-combat);
        }
        
        .item-stat.defense {
            color: var(--color-evolve);
        }

        /* === Painel de Training === */
        #training-panel {
            text-align: center;
        }
        
        #training-panel .training-action {
            padding: 15px;
            margin: 10px 0;
            background-color: #333;
            border-radius: 8px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .training-action button {
            padding: 10px 20px;
            background-color: var(--color-evolve);
            color: white;
            border: none;
            border-radius: 5px;
            cursor: pointer;
        }

        /* === Painel de Soul Power (Reencarna√ß√£o) === */
        #soul-panel {
            text-align: center;
        }
        
        #soul-panel h3 {
            color: var(--color-soul);
        }
        
        #reincarnate-button {
            padding: 15px 30px;
            margin-top: 20px;
            background-color: var(--color-soul);
            color: white;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-size: 1.1em;
        }

        .gold-display {
            color: var(--color-gold);
            font-weight: bold;
            margin-bottom: 15px;
        }
        
        /* === Footer do Jogo (A√ß√µes Globais) === */
        .game-footer {
            width: 100%;
            background-color: var(--color-secondary);
            padding: 10px;
            text-align: center;
            box-shadow: 0 -2px 5px rgba(0, 0, 0, 0.5);
            display: none; /* Inicia oculto, ser√° mostrado no jogo */
            position: fixed;
            bottom: 0;
            left: 0;
        }
        
        .game-footer button {
            padding: 8px 15px;
            margin: 0 5px;
            background-color: var(--color-primary);
            color: var(--color-text);
            border: 1px solid var(--color-accent);
            border-radius: 5px;
            cursor: pointer;
            transition: background-color 0.2s;
        }
        
        .game-footer button:hover {
            background-color: var(--color-accent);
            color: var(--color-primary);
        }
        
    </style>
</head>
<body>

    <div id="start-menu">
        <img src="assets/logo.png" alt="Blaze and Steel Logo">
        <button onclick="startGame()">NOVO JOGO</button>
        <button id="btn-load-game" onclick="loadGame(true, true)">CARREGAR JOGO</button>
    </div>

    <div id="app-wrapper">
        <aside class="sidebar" id="sidebar">
            <div class="hero-stats">
                <h3><span id="hero-name">Heroi</span> - N√≠vel <span id="hero-level">1</span></h3>
                <p class="gold-display">üí∞ Ouro: <span id="hero-gold">0</span></p>

                <div class="stat-bar hp-bar">
                    <div class="bar-fill" id="hp-bar-fill"></div>
                </div>
                <p>HP: <span id="hero-hp-current">100</span>/<span id="hero-hp-max">100</span></p>

                <div class="stat-bar mp-bar">
                    <div class="bar-fill" id="mp-bar-fill"></div>
                </div>
                <p>MP: <span id="hero-mp-current">50</span>/<span id="hero-mp-max">50</span></p>

                <div class="stat-bar exp-bar">
                    <div class="bar-fill" id="exp-bar-fill"></div>
                </div>
                <p>EXP: <span id="hero-exp-current">0</span>/<span id="hero-exp-max">100</span></p>
            </div>

            <hr style="width: 100%; margin: 15px 0;">

            <nav class="sidebar-menu">
                <button id="btn-combat" onclick="showPanel('combat-panel')">Combate/Aventura</button>
                <button id="btn-status" onclick="showPanel('status-panel')">Status</button>
                <button id="btn-inventory" onclick="showPanel('inventory-panel')">Invent√°rio</button>
                <button id="btn-training" onclick="showPanel('training-panel')">Treinamento</button>
                <button id="btn-soul" onclick="showPanel('soul-panel')">Poder da Alma</button>
                
                <button id="btn-main-menu" onclick="returnToMainMenu()">Menu Inicial</button>
            </nav>
        </aside>

        <main class="main-content" id="main-content">

            <div id="combat-panel" class="panel">
                <h2>‚öîÔ∏è Aventura e Combate</h2>
                <div class="enemy-info">
                    <h3 id="enemy-name">Nenhum Inimigo</h3>
                    <div class="stat-bar hp-bar">
                        <div class="bar-fill" id="enemy-hp-bar-fill"></div>
                    </div>
                    <p>HP: <span id="enemy-hp-current">0</span>/<span id="enemy-hp-max">0</span></p>
                </div>
                <div class="combat-actions" id="combat-actions">
                    </div>
                <div class="combat-log" id="combat-log">
                    </div>
            </div>
            
            <div id="status-panel" class="panel">
                <h2>üìà Status do Her√≥i</h2>
                <div class="stat-line"><p>Ataque Base (ATK):</p><p class="stat-value" id="status-atk">10</p></div>
                <div class="stat-line"><p>Defesa Base (DEF):</p><p class="stat-value" id="status-def">10</p></div>
                <div class="stat-line"><p>HP M√°ximo Base:</p><p class="stat-value" id="status-hp">100</p></div>
                <div class="stat-line"><p>MP M√°ximo Base:</p><p class="stat-value" id="status-mp">50</p></div>
                
                <hr>
                
                <h3>Estat√≠sticas Totais (Equipamento)</h3>
                <div class="stat-line"><p>Ataque Total (ATK):</p><p class="stat-value" id="status-atk-total">10</p></div>
                <div class="stat-line"><p>Defesa Total (DEF):</p><p class="stat-value" id="status-def-total">10</p></div>
                <div class="stat-line"><p>HP M√°ximo Total:</p><p class="stat-value" id="status-hp-total">100</p></div>
                <div class="stat-line"><p>MP M√°ximo Total:</p><p class="stat-value" id="status-mp-total">50</p></div>
            </div>

            <div id="inventory-panel" class="panel">
                <h2>üéí Invent√°rio & Equipamentos</h2>
                
                <div class="inventory-container">
                    
                    <div class="equipment-section">
                        <h3>Equipamentos</h3>
                        <div class="equipment-list" id="equipment-list">
                            </div>
                    </div>

                    <div class="inventory-section">
                        <h3>Invent√°rio (<span id="inventory-count">0</span>/<span id="inventory-max">20</span>)</h3>
                        <div class="item-list" id="item-list">
                            </div>
                    </div>
                    
                </div>
                
                <div id="inspection-window">
                    </div>
            </div>
            
            <div id="training-panel" class="panel">
                <h2>üèãÔ∏è Treinamento</h2>
                
                <div id="training-actions">
                    </div>
            </div>
            
            <div id="soul-panel" class="panel">
                <h2>‚ú® Poder da Alma (Reencarna√ß√£o)</h2>
                <p>N√≠vel de Alma: <span id="soul-level">0</span></p>
                <p>B√¥nus Permanente: +<span id="soul-bonus">0</span>% a todos os Status Base.</p>
                <p>Pontos de Poder da Alma Ganhos na Pr√≥xima Reencarna√ß√£o: <span id="soul-points-next">0</span></p>
                
                <p style="margin-top: 20px;">Reencarnar ir√° resetar seu n√≠vel, ouro, invent√°rio e progresso, mas adicionar√° poder permanente ao seu her√≥i.</p>
                
                <button id="reincarnate-button" onclick="reincarnate()" class="disabled">REENCARNAR</button>
            </div>
        </main>
    </div>
    
    <footer class="game-footer" id="game-footer">
        <button onclick="saveGame(true)">Salvar Jogo</button>
        <button onclick="deleteSaveGame(true)">Deletar Save Game</button>
    </footer>

    <script>
        // ====================================================================
        // I. ESTRUTURA DE DADOS
        // ====================================================================

        let hero = {
            name: "Heroi",
            level: 1,
            exp: 0,
            expToNextLevel: 100,
            gold: 0,
            
            baseStats: {
                atk: 10,
                def: 10,
                hpMax: 100,
                mpMax: 50,
            },
            
            stats: {
                atk: 10,
                def: 10,
                hpMax: 100,
                mpMax: 50,
                hpCurrent: 100,
                mpCurrent: 50,
            },
            
            soulPower: {
                level: 0,
                bonusPercent: 0,
                pointsNext: 0,
            },
            
            inventory: [],
            
            equipment: {
                weapon: null,
                armor: null,
                amulet: null,
            },
        };

        const ITEMS = [
            { id: 1, name: "Espada Curta", type: 'weapon', atk: 5, def: 0, gold: 10, description: "Uma espada b√°sica para iniciantes." },
            { id: 2, name: "Armadura de Couro", type: 'armor', atk: 0, def: 5, gold: 15, description: "Prote√ß√£o leve e barata." },
            { id: 3, name: "Amuleto de Mana", type: 'amulet', atk: 0, def: 0, mpMax: 10, gold: 20, description: "Aumenta ligeiramente o MP m√°ximo." },
            { id: 4, name: "Po√ß√£o de HP", type: 'consumable', effect: { hp: 50 }, gold: 5, description: "Restaura 50 pontos de vida." },
            { id: 5, name: "Besta Fraca", type: 'enemy', atk: 5, def: 2, hpMax: 40, expReward: 10, goldReward: 5 },
            { id: 6, name: "Goblin Ladr√£o", type: 'enemy', atk: 8, def: 4, hpMax: 60, expReward: 15, goldReward: 8 },
        ];
        
        const EQUIPMENT_SLOTS = {
            weapon: { name: "Arma", currentItem: null },
            armor: { name: "Armadura", currentItem: null },
            amulet: { name: "Amuleto", currentItem: null },
        };
        
        const TRAINING_ACTIONS = [
            { id: 1, name: "Treinar Ataque (10 Gold)", cost: { gold: 10 }, effect: { stat: 'atk', amount: 1 }, levelRequired: 1 },
            { id: 2, name: "Treinar Defesa (10 Gold)", cost: { gold: 10 }, effect: { stat: 'def', amount: 1 }, levelRequired: 1 },
            { id: 3, name: "Aumentar HP (15 Gold)", cost: { gold: 15 }, effect: { stat: 'hpMax', amount: 10 }, levelRequired: 1 },
            { id: 4, name: "Aumentar MP (15 Gold)", cost: { gold: 15 }, effect: { stat: 'mpMax', amount: 5 }, levelRequired: 1 },
        ];
        
        const MAX_INVENTORY_SLOTS = 20;

        let currentPanel = 'combat-panel';
        let currentEnemy = null;
        let combatLog = [];
        let inspectedItem = null;


        // ====================================================================
        // II. FUN√á√ïES GERAIS DE CONTROLE DE INTERFACE
        // ====================================================================
        
        // 1. Oculta todos os pain√©is de conte√∫do e a sidebar
        function hideAllPanels() {
            document.querySelectorAll('.panel').forEach(p => p.style.display = 'none');
            document.getElementById('sidebar').style.display = 'none';
            document.getElementById('main-content').style.display = 'none';
            document.getElementById('game-footer').style.display = 'none';
        }

        // 2. Mostra a sidebar e o painel de conte√∫do
        function showGameInterface() {
            document.getElementById('sidebar').style.display = 'flex';
            document.getElementById('main-content').style.display = 'flex';
            document.getElementById('game-footer').style.display = 'flex';
        }

        // 3. Fun√ß√£o principal para trocar de painel (guarda o estado)
        function showPanel(panelId) {
            document.querySelectorAll('.panel').forEach(p => p.style.display = 'none');
            document.getElementById(panelId).style.display = 'block';
            currentPanel = panelId;
            
            // Renderiza o painel quando ele √© mostrado
            if (panelId === 'status-panel') renderStatus();
            if (panelId === 'inventory-panel') { 
                renderEquipment();
                renderInventory(); 
            }
            if (panelId === 'training-panel') renderTrainingActions();
            if (panelId === 'soul-panel') renderSoulPanel();
        }

        // 4. Inicia um Novo Jogo
        function startGame() {
            // Esconde o menu inicial
            document.getElementById('start-menu').style.display = 'none';

            // Reseta o estado (apenas em Novo Jogo)
            if (!hero.name) { // Se n√£o houver nome, √© um jogo verdadeiramente novo ou resetado
                hero = {
                    name: "Heroi",
                    level: 1,
                    exp: 0,
                    expToNextLevel: 100,
                    gold: 0,
                    
                    baseStats: {
                        atk: 10,
                        def: 10,
                        hpMax: 100,
                        mpMax: 50,
                    },
                    
                    stats: {
                        atk: 10,
                        def: 10,
                        hpMax: 100,
                        mpMax: 50,
                        hpCurrent: 100,
                        mpCurrent: 50,
                    },
                    
                    soulPower: {
                        level: 0,
                        bonusPercent: 0,
                        pointsNext: 0,
                    },
                    
                    inventory: [],
                    
                    equipment: {
                        weapon: null,
                        armor: null,
                        amulet: null,
                    },
                };
            }
            
            // Aplica b√¥nus da Alma (se houver, mesmo em Novo Jogo ap√≥s Reencarnar)
            applySoulBonus();

            // Garante que HP/MP est√£o cheios (para Novo Jogo ou Carregar)
            hero.stats.hpCurrent = hero.stats.hpMax;
            hero.stats.mpCurrent = hero.stats.mpMax;
            
            // Mostra a interface do jogo
            showGameInterface();
            
            // Inicia no painel de combate (padr√£o)
            showPanel('combat-panel'); 
            
            // Renderiza tudo
            updateStatsDisplay();
            renderCombatActions();
            
            // Salva o jogo inicial
            saveGame();
        }

        // 5. Retorna ao Menu Inicial
        function returnToMainMenu() {
            if (confirm("Deseja realmente voltar ao Menu Inicial? Seu progresso atual ser√° salvo.")) {
                saveGame();
                hideAllPanels();
                // Mostra o menu inicial e reavalia o bot√£o CARREGAR JOGO
                document.getElementById('start-menu').style.display = 'flex';
                checkLoadGameButton();
            }
        }
        
        // 6. Altera o estado do bot√£o "CARREGAR JOGO"
        function checkLoadGameButton() {
            const save = localStorage.getItem('blazeAndSteelSave');
            const btn = document.getElementById('btn-load-game');
            if (save) {
                btn.classList.remove('disabled');
                btn.disabled = false;
            } else {
                btn.classList.add('disabled');
                btn.disabled = true;
            }
        }

        // ====================================================================
        // III. GEST√ÉO DE DADOS (Save/Load)
        // ====================================================================

        // 1. Salva o jogo no Local Storage
        function saveGame(showAlert = false) {
            try {
                const saveData = JSON.stringify(hero);
                localStorage.setItem('blazeAndSteelSave', saveData);
                if (showAlert) alert("Jogo salvo com sucesso!");
            } catch (e) {
                console.error("Erro ao salvar o jogo:", e);
                if (showAlert) alert("Erro ao salvar o jogo.");
            }
        }

        // 2. Carrega o jogo do Local Storage
        function loadGame(showAlert = false, autoStartGame = false) {
            const saveData = localStorage.getItem('blazeAndSteelSave');
            const btn = document.getElementById('btn-load-game');

            if (saveData) {
                try {
                    const loadedHero = JSON.parse(saveData);
                    hero = loadedHero;
                    
                    // Garante que o estado de equipamento e slots est√£o consistentes
                    EQUIPMENT_SLOTS.weapon.currentItem = hero.equipment.weapon;
                    EQUIPMENT_SLOTS.armor.currentItem = hero.equipment.armor;
                    EQUIPMENT_SLOTS.amulet.currentItem = hero.equipment.amulet;
                    
                    // Reavalia o estado do bot√£o de carregamento
                    btn.classList.remove('disabled');
                    btn.disabled = false;
                    
                    // Chama startGame() apenas se o bot√£o CARREGAR JOGO foi clicado
                    if (autoStartGame) {
                        startGame();
                        if (showAlert) alert("Jogo carregado com sucesso!");
                    }
                    
                    return true; // Retorna true se um save foi carregado
                    
                } catch (e) {
                    console.error("Erro ao carregar o jogo:", e);
                    localStorage.removeItem('blazeAndSteelSave'); // Corrompido, deleta
                    btn.classList.add('disabled');
                    btn.disabled = true;
                    if (showAlert) alert("Save corrompido, iniciando novo jogo.");
                    // N√£o chama startGame aqui, apenas em Novo Jogo ou clique em Carregar
                    return false;
                }
            } else {
                btn.classList.add('disabled');
                btn.disabled = true;
                return false; // Retorna false se nenhum save foi encontrado
            }
        }
        
        // 3. Deleta o Save Game
        function deleteSaveGame(showAlert = false) {
             if (confirm("Voc√™ tem certeza que deseja DELETAR o seu save game? Esta a√ß√£o √© irrevers√≠vel.")) {
                localStorage.removeItem('blazeAndSteelSave');
                checkLoadGameButton(); // Desabilita o bot√£o
                if (showAlert) alert("Save game deletado. O jogo ser√° resetado na pr√≥xima carga.");
                
                // Retorna ao menu principal ap√≥s deletar o save
                returnToMainMenu();
             }
        }


        // ====================================================================
        // IV. FUN√á√ïES DE RENDERIZA√á√ÉO E STATS
        // ====================================================================

        // 1. Atualiza a barra de progresso (HP, MP, EXP)
        function updateBar(elementId, current, max, label = '') {
            const fillElement = document.getElementById(elementId);
            const percent = max > 0 ? (current / max) * 100 : 0;
            fillElement.style.width = `${percent}%`;
            fillElement.textContent = `${label} ${current}/${max}`;
            
            // Ajuste de cor/visibilidade para EXP bar
            if (elementId === 'exp-bar-fill' && percent < 10) {
                 fillElement.textContent = ''; // Esconde texto se a barra for muito pequena
            }
        }

        // 2. Atualiza todas as estat√≠sticas na Sidebar
        function updateStatsDisplay() {
            const { stats, level, exp, expToNextLevel, gold, name } = hero;
            
            document.getElementById('hero-name').textContent = name;
            document.getElementById('hero-level').textContent = level;
            document.getElementById('hero-gold').textContent = gold;
            
            document.getElementById('hero-hp-current').textContent = stats.hpCurrent;
            document.getElementById('hero-hp-max').textContent = stats.hpMax;
            
            document.getElementById('hero-mp-current').textContent = stats.mpCurrent;
            document.getElementById('hero-mp-max').textContent = stats.mpMax;
            
            document.getElementById('hero-exp-current').textContent = exp;
            document.getElementById('hero-exp-max').textContent = expToNextLevel;
            
            updateBar('hp-bar-fill', stats.hpCurrent, stats.hpMax);
            updateBar('mp-bar-fill', stats.mpCurrent, stats.mpMax);
            updateBar('exp-bar-fill', exp, expToNextLevel, 'EXP:');
        }

        // 3. Aplica o b√¥nus da alma nos stats base
        function applySoulBonus() {
            const { baseStats, soulPower } = hero;
            const multiplier = 1 + (soulPower.bonusPercent / 100);

            // Aplica b√¥nus de alma
            hero.stats.atk = Math.floor(baseStats.atk * multiplier);
            hero.stats.def = Math.floor(baseStats.def * multiplier);
            hero.stats.hpMax = Math.floor(baseStats.hpMax * multiplier);
            hero.stats.mpMax = Math.floor(baseStats.mpMax * multiplier);
        }
        
        // 4. Recalcula stats baseados em equipamentos
        function updateEquipmentStats() {
            // Primeiro, aplica o b√¥nus da alma nos stats base (garantindo que est√£o corretos)
            applySoulBonus(); 
            
            // Reinicia os totais com os stats base (com b√¥nus da alma)
            hero.stats.atk = hero.stats.atk;
            hero.stats.def = hero.stats.def;
            hero.stats.hpMax = hero.stats.hpMax;
            hero.stats.mpMax = hero.stats.mpMax;
            
            // Adiciona b√¥nus de equipamento
            for (const slot in hero.equipment) {
                const item = hero.equipment[slot];
                if (item) {
                    hero.stats.atk += (item.atk || 0);
                    hero.stats.def += (item.def || 0);
                    hero.stats.hpMax += (item.hpMax || 0);
                    hero.stats.mpMax += (item.mpMax || 0);
                }
            }
            
            // Garante que o HP/MP atual n√£o exceda o m√°ximo
            hero.stats.hpCurrent = Math.min(hero.stats.hpCurrent, hero.stats.hpMax);
            hero.stats.mpCurrent = Math.min(hero.stats.mpCurrent, hero.stats.mpMax);
            
            updateStatsDisplay();
            saveGame();
        }

        // 5. Renderiza o Painel de Status
        function renderStatus() {
            const { baseStats, stats } = hero;
            
            // Stats Base
            document.getElementById('status-atk').textContent = baseStats.atk;
            document.getElementById('status-def').textContent = baseStats.def;
            document.getElementById('status-hp').textContent = baseStats.hpMax;
            document.getElementById('status-mp').textContent = baseStats.mpMax;
            
            // Stats Totais (com equipamento)
            document.getElementById('status-atk-total').textContent = stats.atk;
            document.getElementById('status-def-total').textContent = stats.def;
            document.getElementById('status-hp-total').textContent = stats.hpMax;
            document.getElementById('status-mp-total').textContent = stats.mpMax;
        }


        // ====================================================================
        // V. LEVEL UP
        // ====================================================================
        
        // 1. Adiciona Experi√™ncia
        function addExp(amount) {
            hero.exp += amount;
            alert(`Voc√™ ganhou ${amount} EXP.`);
            
            while (hero.exp >= hero.expToNextLevel) {
                hero.exp -= hero.expToNextLevel;
                levelUp();
            }
            
            updateStatsDisplay();
            saveGame();
        }

        // 2. Sobe de N√≠vel
        function levelUp() {
            hero.level++;
            
            // Aumenta estat√≠sticas base
            hero.baseStats.atk += 2;
            hero.baseStats.def += 2;
            hero.baseStats.hpMax += 15;
            hero.baseStats.mpMax += 5;
            
            // Recalcula o pr√≥ximo n√≠vel de EXP
            hero.expToNextLevel = Math.floor(hero.expToNextLevel * 1.5);
            
            // Aplica b√¥nus de Alma e Equipamento
            updateEquipmentStats();
            
            // Cura o her√≥i
            hero.stats.hpCurrent = hero.stats.hpMax;
            hero.stats.mpCurrent = hero.stats.mpMax;
            
            alert(`Parab√©ns! Voc√™ alcan√ßou o N√≠vel ${hero.level}!`);
        }


        // ====================================================================
        // VI. COMBATE E AVENTURA
        // ====================================================================
        
        // 1. Encontra e renderiza um novo inimigo
        function findEnemy() {
            // Filtra apenas itens do tipo 'enemy'
            const possibleEnemies = ITEMS.filter(item => item.type === 'enemy');
            
            // Simples: escolhe um inimigo aleat√≥rio
            const enemyTemplate = possibleEnemies[Math.floor(Math.random() * possibleEnemies.length)];
            
            // Cria uma c√≥pia do inimigo (para que ele tenha sua pr√≥pria HP/estado)
            currentEnemy = { 
                ...enemyTemplate,
                stats: {
                    atk: enemyTemplate.atk,
                    def: enemyTemplate.def,
                    hpMax: enemyTemplate.hpMax,
                    hpCurrent: enemyTemplate.hpMax,
                }
            };
            
            combatLog = []; // Limpa o log
            addCombatLog(`Um(a) ${currentEnemy.name} apareceu! Prepare-se para o combate!`);
            
            renderEnemyStats();
            renderCombatActions();
        }

        // 2. Renderiza as estat√≠sticas do inimigo
        function renderEnemyStats() {
            if (currentEnemy) {
                document.getElementById('enemy-name').textContent = currentEnemy.name;
                document.getElementById('enemy-hp-current').textContent = currentEnemy.stats.hpCurrent;
                document.getElementById('enemy-hp-max').textContent = currentEnemy.stats.hpMax;
                updateBar('enemy-hp-bar-fill', currentEnemy.stats.hpCurrent, currentEnemy.stats.hpMax);
            } else {
                document.getElementById('enemy-name').textContent = "Nenhum Inimigo";
                document.getElementById('enemy-hp-current').textContent = 0;
                document.getElementById('enemy-hp-max').textContent = 0;
                updateBar('enemy-hp-bar-fill', 0, 100); // Barra vazia
            }
        }

        // 3. Adiciona uma mensagem ao log de combate
        function addCombatLog(message) {
            combatLog.push(message);
            // Mant√©m apenas as √∫ltimas 10 mensagens (opcional)
            if (combatLog.length > 10) combatLog.shift();
            
            const logDiv = document.getElementById('combat-log');
            logDiv.innerHTML = combatLog.map(msg => `<p style="margin: 0;">${msg}</p>`).join('');
            
            // Rola para o final do log
            logDiv.scrollTop = logDiv.scrollHeight;
        }

        // 4. Renderiza os bot√µes de a√ß√£o de combate
        function renderCombatActions() {
            const actionsDiv = document.getElementById('combat-actions');
            actionsDiv.innerHTML = '';
            
            if (!currentEnemy) {
                // Fora de combate: Bot√£o de Aventura
                const adventureBtn = document.createElement('button');
                adventureBtn.textContent = 'Explorar (Encontrar Inimigo)';
                adventureBtn.onclick = findEnemy;
                actionsDiv.appendChild(adventureBtn);
                
            } else {
                // Em combate: Bot√µes de Ataque e Magia
                
                const attackBtn = document.createElement('button');
                attackBtn.textContent = 'Ataque F√≠sico';
                attackBtn.onclick = () => playerAttack(currentEnemy);
                actionsDiv.appendChild(attackBtn);
                
                // Bot√£o de Magia (exemplo simples)
                const magicBtn = document.createElement('button');
                magicBtn.textContent = 'Magia (Custo 5 MP)';
                magicBtn.onclick = () => playerMagic(currentEnemy);
                actionsDiv.appendChild(magicBtn);
            }
        }
        
        // 5. Ataque do Jogador
        function playerAttack(enemy) {
            if (enemy.stats.hpCurrent <= 0) return;
            
            // Dano = (ATK do Her√≥i) - (DEF do Inimigo)
            let damage = Math.max(0, hero.stats.atk - enemy.stats.def);
            
            // Adiciona aleatoriedade (por exemplo, 80% a 100% do dano base)
            damage = Math.floor(damage * (0.8 + Math.random() * 0.2)); 
            
            if (damage === 0) {
                 addCombatLog(`Seu ataque foi muito fraco para penetrar a defesa do(a) ${enemy.name}!`);
            } else {
                enemy.stats.hpCurrent = Math.max(0, enemy.stats.hpCurrent - damage);
                addCombatLog(`Voc√™ atacou o(a) ${enemy.name} por ${damage} de dano.`);
            }

            renderEnemyStats();
            
            if (enemy.stats.hpCurrent === 0) {
                enemyDefeated(enemy);
            } else {
                // Turno do Inimigo
                setTimeout(() => enemyAttack(enemy), 1000); 
            }
            
            saveGame();
        }

        // 6. Magia do Jogador (Exemplo)
        function playerMagic(enemy) {
            const mpCost = 5;
            if (hero.stats.mpCurrent < mpCost) {
                addCombatLog("MP insuficiente para usar magia!");
                return;
            }
            
            hero.stats.mpCurrent -= mpCost;
            
            // Magia causa dano fixo, ignorando DEF
            let damage = 15; 
            
            enemy.stats.hpCurrent = Math.max(0, enemy.stats.hpCurrent - damage);
            addCombatLog(`Voc√™ usou magia no(a) ${enemy.name} causando ${damage} de dano.`);
            
            updateStatsDisplay();
            renderEnemyStats();
            
            if (enemy.stats.hpCurrent === 0) {
                enemyDefeated(enemy);
            } else {
                // Turno do Inimigo
                setTimeout(() => enemyAttack(enemy), 1000); 
            }
            
            saveGame();
        }
        
        // 7. Ataque do Inimigo
        function enemyAttack(enemy) {
            if (hero.stats.hpCurrent <= 0) return;
            
            // Dano = (ATK do Inimigo) - (DEF do Her√≥i)
            let damage = Math.max(0, enemy.stats.atk - hero.stats.def);
            damage = Math.floor(damage * (0.8 + Math.random() * 0.2));
            
            if (damage === 0) {
                addCombatLog(`${enemy.name} atacou, mas seu ataque foi defendido.`);
            } else {
                hero.stats.hpCurrent = Math.max(0, hero.stats.hpCurrent - damage);
                addCombatLog(`${enemy.name} atacou voc√™ por ${damage} de dano.`);
            }
            
            updateStatsDisplay();
            
            if (hero.stats.hpCurrent === 0) {
                playerDefeated();
            }
            
            saveGame();
        }

        // 8. Inimigo Derrotado
        function enemyDefeated(enemy) {
            addCombatLog(`${enemy.name} foi derrotado(a)!`);
            
            addExp(enemy.expReward);
            hero.gold += enemy.goldReward;
            
            addCombatLog(`Voc√™ recebeu ${enemy.expReward} EXP e ${enemy.goldReward} Ouro.`);
            
            currentEnemy = null;
            renderEnemyStats();
            renderCombatActions();
            updateStatsDisplay();
            saveGame();
        }

        // 9. Jogador Derrotado
        function playerDefeated() {
            alert("Voc√™ foi derrotado! Suas feridas foram curadas, mas voc√™ perdeu parte do seu ouro.");
            
            // Penalidade de ouro
            hero.gold = Math.floor(hero.gold * 0.9); 
            
            // Cura total
            hero.stats.hpCurrent = hero.stats.hpMax;
            hero.stats.mpCurrent = hero.stats.mpMax;
            
            currentEnemy = null;
            renderEnemyStats();
            
            addCombatLog("Voc√™ se recuperou de seus ferimentos.");
            
            renderCombatActions();
            updateStatsDisplay();
            saveGame();
        }


        // ====================================================================
        // VII. INVENT√ÅRIO E EQUIPAMENTO
        // ====================================================================

        // 1. Adiciona um item ao invent√°rio
        function addItem(itemTemplateId) {
            if (hero.inventory.length >= MAX_INVENTORY_SLOTS) {
                alert("Invent√°rio cheio!");
                return false;
            }
            
            const itemTemplate = ITEMS.find(i => i.id === itemTemplateId);
            if (!itemTemplate) return false;
            
            // Cria uma c√≥pia √∫nica do item para o invent√°rio (dando um ID √∫nico)
            const newItem = { 
                ...itemTemplate,
                uniqueId: Date.now() + Math.random(), // ID para diferenciar c√≥pias
            };
            
            hero.inventory.push(newItem);
            renderInventory();
            saveGame();
            return true;
        }

        // 2. Renderiza a lista de itens no invent√°rio
        function renderInventory() {
            const listDiv = document.getElementById('item-list');
            listDiv.innerHTML = '';
            
            document.getElementById('inventory-count').textContent = hero.inventory.length;
            document.getElementById('inventory-max').textContent = MAX_INVENTORY_SLOTS;

            if (hero.inventory.length === 0) {
                listDiv.innerHTML = '<p>Invent√°rio vazio.</p>';
                return;
            }

            hero.inventory.forEach(item => {
                const itemDiv = document.createElement('div');
                itemDiv.className = `item ${item.uniqueId === (inspectedItem ? inspectedItem.uniqueId : null) ? 'selected' : ''}`;
                itemDiv.textContent = item.name + (item.type === 'consumable' ? ' (Consum√≠vel)' : '');
                itemDiv.onclick = () => inspectItem(item);
                listDiv.appendChild(itemDiv);
            });
        }
        
        // 3. Renderiza os slots de equipamento
        function renderEquipment() {
            const listDiv = document.getElementById('equipment-list');
            listDiv.innerHTML = '';
            
            for (const key in EQUIPMENT_SLOTS) {
                const slot = EQUIPMENT_SLOTS[key];
                const item = hero.equipment[key];
                
                const slotDiv = document.createElement('div');
                slotDiv.className = 'item-slot';
                
                if (item) {
                    slotDiv.innerHTML = `<strong>${slot.name}:</strong> ${item.name} 
                        <button onclick="unequipItem(hero.inventory.find(i => i.uniqueId === ${item.uniqueId}))" style="float: right; padding: 5px;">X</button>`;
                } else {
                    slotDiv.innerHTML = `<strong>${slot.name}:</strong> Vazio`;
                }
                
                listDiv.appendChild(slotDiv);
            }
        }
        
        // 4. Inspeciona um item
        function inspectItem(item) {
            inspectedItem = item;
            const windowDiv = document.getElementById('inspection-window');
            windowDiv.innerHTML = `<h3>${item.name}</h3><p>${item.description}</p>`;
            
            // Adiciona Stats
            let statsHtml = '';
            if (item.atk) statsHtml += `<span class="item-stat attack">ATK: +${item.atk}</span> `;
            if (item.def) statsHtml += `<span class="item-stat defense">DEF: +${item.def}</span> `;
            if (item.hpMax) statsHtml += `<span class="item-stat item-stat">HP Max: +${item.hpMax}</span> `;
            if (item.mpMax) statsHtml += `<span class="item-stat item-stat">MP Max: +${item.mpMax}</span> `;
            windowDiv.innerHTML += `<p>${statsHtml}</p>`;
            
            if (item.type === 'consumable') {
                windowDiv.innerHTML += `<button onclick="useItem(inspectedItem)">USAR</button>`;
            } else if (['weapon', 'armor', 'amulet'].includes(item.type)) {
                // Verifica se est√° equipado
                const slotKey = item.type;
                const isEquipped = hero.equipment[slotKey] && hero.equipment[slotKey].uniqueId === item.uniqueId;
                
                if (isEquipped) {
                    windowDiv.innerHTML += `<button onclick="unequipItem(inspectedItem)">DESEQUIPAR</button>`;
                } else {
                    windowDiv.innerHTML += `<button onclick="equipItem(inspectedItem)">EQUIPAR</button>`;
                }
            }
            
            // Adiciona bot√£o de Descartar
            windowDiv.innerHTML += `<button onclick="discardItem(inspectedItem)" style="background-color: #c0392b; margin-left: 10px;">DESCARTAR</button>`;
            
            renderInventory(); // Para destacar o item selecionado
        }
        
        // 5. Usa o item (Consum√≠vel)
        function useItem(item) {
            if (item.type !== 'consumable') return;
            
            if (item.effect.hp) {
                const amount = item.effect.hp;
                const healed = Math.min(amount, hero.stats.hpMax - hero.stats.hpCurrent);
                hero.stats.hpCurrent += healed;
                alert(`${item.name} usada! Restaurou ${healed} HP.`);
            }
            
            // Remove do invent√°rio
            removeItem(item);
            
            updateStatsDisplay();
            saveGame();
        }
        
        // 6. Remove um item do invent√°rio (ap√≥s uso ou descarte)
        function removeItem(itemToRemove) {
            const index = hero.inventory.findIndex(item => item.uniqueId === itemToRemove.uniqueId);
            if (index > -1) {
                // Se o item for o inspecionado, limpa a janela
                if (inspectedItem && inspectedItem.uniqueId === itemToRemove.uniqueId) {
                    document.getElementById('inspection-window').innerHTML = '';
                    inspectedItem = null;
                }
                // Se o item estiver equipado, desequipa primeiro
                if (isItemEquipped(itemToRemove)) {
                    unequipItem(itemToRemove, false); // Desequipa sem alertar
                }
                
                hero.inventory.splice(index, 1);
                renderInventory();
                saveGame();
            }
        }
        
        // 7. Descarta um item (remove do invent√°rio)
        function discardItem(item) {
            if (confirm(`Tem certeza que deseja descartar ${item.name}? Voc√™ o perder√° permanentemente.`)) {
                removeItem(item);
            }
        }
        
        // 8. Verifica se o item est√° equipado
        function isItemEquipped(item) {
            const slotKey = item.type;
            return hero.equipment[slotKey] && hero.equipment[slotKey].uniqueId === item.uniqueId;
        }

        // 9. Equipa o item
        function equipItem(item, showAlert = true) {
            const slotKey = item.type;
            
            // 1. Verifica se o item √© equip√°vel
            if (!['weapon', 'armor', 'amulet'].includes(slotKey)) {
                if (showAlert) alert("Este item n√£o pode ser equipado.");
                return;
            }
            
            // 2. Se houver um item equipado, desequipa-o primeiro
            const currentEquippedItem = hero.equipment[slotKey];
            if (currentEquippedItem) {
                // Desequipa, mas n√£o precisa retornar ao invent√°rio (j√° est√° l√°)
                unequipItem(currentEquippedItem, false); 
            }
            
            // 3. Equipa o novo item
            hero.equipment[slotKey] = item;
            EQUIPMENT_SLOTS[slotKey].currentItem = item;
            
            // Atualiza todos os pain√©is
            renderEquipment();
            renderInventory();
            updateEquipmentStats(); // Recalcula stats
            if (showAlert) inspectItem(item); // Reinspeciona para mostrar "DESEQUIPAR"
            saveGame();
            if (showAlert) alert(`${item.name} equipado no slot de ${EQUIPMENT_SLOTS[slotKey].name}.`);
        }
        
        // 10. Desequipa o item
        function unequipItem(item, showAlert = true) {
            const slotKey = item.type;
            
            if (hero.equipment[slotKey] && hero.equipment[slotKey].uniqueId === item.uniqueId) {
                 hero.equipment[slotKey] = null;
                 EQUIPMENT_SLOTS[slotKey].currentItem = null;
                 if (showAlert) alert(`${item.name} desequipado.`);
            } else if (showAlert) {
                 // Esta verifica√ß√£o evita um alert se chamado internamente (ex: por removeItem)
                 return;
            }
            
            // Atualiza todos os pain√©is
            renderEquipment();
            renderInventory();
            updateEquipmentStats(); // Recalcula stats
            // Reinspeciona para atualizar o bot√£o para "EQUIPAR"
            if (inspectedItem) {
                inspectItem(inspectedItem); 
            }
            saveGame();
        }

        
        // ====================================================================
        // VIII. TREINAMENTO
        // ====================================================================

        // 1. Renderiza as a√ß√µes de treinamento
        function renderTrainingActions() {
            const actionsDiv = document.getElementById('training-actions');
            actionsDiv.innerHTML = '';
            
            TRAINING_ACTIONS.forEach(action => {
                const actionDiv = document.createElement('div');
                actionDiv.className = 'training-action';
                actionDiv.innerHTML = `
                    <p>${action.name}</p>
                    <button onclick="performTraining(${action.id})">TREINAR</button>
                `;
                actionsDiv.appendChild(actionDiv);
            });
        }
        
        // 2. Executa uma a√ß√£o de treinamento
        function performTraining(actionId) {
            const action = TRAINING_ACTIONS.find(a => a.id === actionId);
            if (!action) return;
            
            const { cost, effect } = action;
            
            // Verifica custo
            if (cost.gold && hero.gold < cost.gold) {
                alert("Ouro insuficiente para treinar!");
                return;
            }
            
            // Aplica custo
            hero.gold -= cost.gold || 0;
            
            // Aplica efeito
            if (effect.stat) {
                hero.baseStats[effect.stat] += effect.amount;
                alert(`Treinamento bem-sucedido! ${effect.stat.toUpperCase()} aumentou em ${effect.amount}.`);
            }
            
            // Atualiza stats, display e salva
            updateEquipmentStats();
            updateStatsDisplay();
            saveGame();
            
            // Cura o her√≥i como b√¥nus de treinamento
            hero.stats.hpCurrent = hero.stats.hpMax;
            hero.stats.mpCurrent = hero.stats.mpMax;
        }


        // ====================================================================
        // IX. PODER DA ALMA (REENCARNA√á√ÉO)
        // ====================================================================
        
        // 1. Calcula a pontua√ß√£o da alma
        function calculateSoulPoints() {
            // Exemplo simples: 1 ponto por n√≠vel acima do N√≠vel 5
            const points = Math.max(0, hero.level - 5);
            hero.soulPower.pointsNext = points;
            renderSoulPanel();
            return points;
        }
        
        // 2. Renderiza o Painel da Alma
        function renderSoulPanel() {
            calculateSoulPoints(); // Atualiza a pontua√ß√£o antes de renderizar
            
            document.getElementById('soul-level').textContent = hero.soulPower.level;
            document.getElementById('soul-bonus').textContent = hero.soulPower.bonusPercent;
            document.getElementById('soul-points-next').textContent = hero.soulPower.pointsNext;
            
            const btn = document.getElementById('reincarnate-button');
            
            if (hero.soulPower.pointsNext > 0) {
                btn.classList.remove('disabled');
                btn.disabled = false;
            } else {
                btn.classList.add('disabled');
                btn.disabled = true;
            }
        }
        
        // 3. Executa a Reencarna√ß√£o
        function reincarnate() {
            if (hero.soulPower.pointsNext === 0) {
                alert("Voc√™ precisa alcan√ßar um n√≠vel mais alto para reencarnar e ganhar Pontos de Alma.");
                return;
            }
            
            if (!confirm(`Voc√™ vai reencarnar e ganhar ${hero.soulPower.pointsNext} N√≠veis de Alma! Seu her√≥i ser√° resetado. Continuar?`)) {
                return;
            }
            
            // 1. Aplica o upgrade
            hero.soulPower.level += hero.soulPower.pointsNext;
            hero.soulPower.bonusPercent = hero.soulPower.level * 2; // Exemplo: 2% por n√≠vel
            
            // 2. Reseta o Her√≥i para o estado inicial
            const soulBonus = hero.soulPower; // Guarda o b√¥nus
            
            hero = {
                name: "Heroi",
                level: 1,
                exp: 0,
                expToNextLevel: 100,
                gold: 0,
                
                baseStats: { atk: 10, def: 10, hpMax: 100, mpMax: 50, },
                stats: { atk: 10, def: 10, hpMax: 100, mpMax: 50, hpCurrent: 100, mpCurrent: 50, },
                
                soulPower: soulBonus, // Reaplica o b√¥nus
                inventory: [],
                equipment: { weapon: null, armor: null, amulet: null, },
            };
            
            // 3. Aplica o b√¥nus da alma no novo her√≥i
            applySoulBonus(); 
            
            alert(`Reencarna√ß√£o completa! Seu N√≠vel de Alma √© agora ${hero.soulPower.level}.`);
            
            // 4. Salva e inicia novo jogo
            saveGame();
            startGame(); 
            showPanel('soul-panel'); // Volta para o painel de alma
        }


        // ====================================================================
        // X. INICIALIZA√á√ÉO (Bloco Final)
        // ====================================================================

        // 1. Garantimos que todos os pain√©is de jogo est√£o ocultos.
        hideAllPanels(); 

        // 2. Tentamos carregar os dados salvos.
        // loadGame() apenas carrega os dados e verifica o bot√£o 'CARREGAR JOGO'. 
        // N√£o chama startGame() se n√£o for solicitado.
        loadGame(); 
        
        // 3. Garantimos que o Menu Inicial seja exibido por padr√£o.
        document.getElementById('start-menu').style.display = 'flex'; 

        // 4. Reavalia o estado do bot√£o CARREGAR JOGO ao iniciar
        checkLoadGameButton();
        
    </script>

</body>
</html>
