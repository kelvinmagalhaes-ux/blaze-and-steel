<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Blaze and Steel RPG</title>
    <style>
        /* Vari√°veis de Cores (CSS Custom Properties) */
        :root {
            --color-primary: #1e1e2d;
            --color-secondary: #36364f;
            --color-text: #e0e0e0;
            --color-accent: #f39c12; /* Ouro */
            --color-combat: #c0392b; /* Combate/Aventura */
            --color-evolve: #8e44ad; /* Evoluir/Treinamento */
            --color-energy: #3498db; /* Energia */
            --color-soul: #9b59b6; /* Alma/Reencarna√ß√£o */
            --color-hp: #2ecc71; /* HP/Vida */
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background-color: var(--color-primary);
            color: var(--color-text);
            margin: 0;
            display: flex;
            min-height: 100vh;
            overflow: hidden; /* Evita a barra de rolagem geral */
        }

        /* Estrutura Geral */
        #app-wrapper {
            display: flex;
            width: 100%;
        }

        /* Sidebar (Menu Lateral) */
        #sidebar {
            width: 200px;
            background-color: var(--color-secondary);
            padding: 20px 0;
            box-shadow: 2px 0 5px rgba(0, 0, 0, 0.5);
            display: none; /* Inicia escondida, aparece depois de JOGAR */
        }

        .sidebar-menu button {
            display: block;
            width: 100%;
            padding: 15px 20px;
            text-align: left;
            background: none;
            border: none;
            color: var(--color-text);
            font-size: 1.1em;
            cursor: pointer;
            transition: background-color 0.2s;
        }

        .sidebar-menu button:hover {
            background-color: rgba(255, 255, 255, 0.1);
        }

        .sidebar-menu button.active {
            background-color: var(--color-evolve);
            font-weight: bold;
        }
        
        /* √çcones da Sidebar */
        .sidebar-menu button::before {
            content: ' ';
            margin-right: 10px;
        }
        #btn-training::before { content: '‚öîÔ∏è'; }
        #btn-adventure::before { content: '‚úàÔ∏è'; }
        #btn-upgrades::before { content: '‚ú®'; }
        #btn-equipment::before { content: 'üõ°Ô∏è'; }
        #btn-inventory::before { content: 'üéí'; }
        #btn-status::before { content: 'üìä'; }
        #btn-expedition::before { content: 'üöÄ'; }


        /* √Årea de Conte√∫do Principal */
        #main-content {
            flex-grow: 1;
            padding: 20px;
            overflow-y: auto; /* Permite rolar apenas o conte√∫do principal */
            max-height: 100vh;
        }

        /* Pain√©is de Conte√∫do (Geral) */
        .content-panel {
            background-color: var(--color-secondary);
            padding: 20px;
            border-radius: 8px;
            margin-bottom: 20px;
        }

        /* Menu Inicial (Start Menu) */
        #start-menu {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            width: 100%;
            height: 100vh;
            position: absolute; /* Para centralizar sobre o body */
            top: 0;
            left: 0;
            background-color: var(--color-primary);
            z-index: 100;
        }
        
        .game-logo {
            max-width: 90%;
            width: 500px;
            height: auto;
            margin-bottom: 50px;
            image-rendering: -webkit-optimize-contrast;
            image-rendering: crisp-edges;
        }

        .menu-button-stack button {
            display: block;
            width: 300px;
            padding: 15px 20px;
            margin: 10px 0;
            border: 2px solid var(--color-accent);
            border-radius: 5px;
            background-color: var(--color-combat);
            color: var(--color-text);
            font-size: 1.2em;
            cursor: pointer;
            transition: background-color 0.2s, transform 0.1s;
            box-shadow: 0 4px var(--color-accent);
        }

        .menu-button-stack button:hover {
            background-color: #e74c3c;
            transform: translateY(-2px);
            box-shadow: 0 6px var(--color-accent);
        }

        .menu-button-stack button:active {
            transform: translateY(2px);
            box-shadow: 0 2px var(--color-accent);
        }

        /* Header e Display de Recursos */
        #header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 0 20px 20px 0;
            border-bottom: 1px solid var(--color-secondary);
            margin-bottom: 20px;
        }

        .resource-display {
            display: flex;
            gap: 15px;
        }

        .resource-item {
            font-size: 1.1em;
            font-weight: bold;
        }

        .resource-item span {
            margin-left: 5px;
        }
        
        /* Bot√µes de A√ß√£o (Geral) */
        button:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }
        
        /* Estilo do Bot√£o Evoluir */
        #evolution-panel button {
            background-color: var(--color-evolve);
            color: white;
            border: none;
            padding: 10px 15px;
            border-radius: 5px;
            margin-top: 10px;
            cursor: pointer;
            transition: background-color 0.2s;
        }

        #evolution-panel button:hover:not(:disabled) {
            background-color: #6c3483;
        }

    </style>
</head>
<body>

    <div id="app-wrapper">

        <div id="start-menu">
            <img src="assets/blaze-and-steel.png.png" alt="Blaze and Steel Logo" class="game-logo"> 
            
            <div class="menu-button-stack">
                <button onclick="startGame()">JOGAR</button>
                <button onclick="saveGame()">SALVAR</button>
                <button onclick="loadGame()">CARREGAR</button>
                <button onclick="alert('Sair: Por enquanto, feche a aba.')">SAIR</button>
            </div>
        </div>

        <div id="sidebar">
            <div id="hero-info" style="text-align: center; margin-bottom: 20px;">
                <h3 id="hero-name">Her√≥i CLT</h3>
                <p>N√≠vel: <span id="power-level">1</span></p>
            </div>
            <nav class="sidebar-menu">
                <button id="btn-training" onclick="showPanel('training-panel')" class="active">‚öîÔ∏è Quartel-General</button>
                <button id="btn-adventure" onclick="showPanel('adventure-panel')">‚úàÔ∏è Aventura</button>
                <button id="btn-upgrades" onclick="showPanel('upgrades-panel')">‚ú® Upgrades</button>
                <button id="btn-equipment" onclick="showPanel('equipment-panel')">üõ°Ô∏è Equipamento</button>
                <button id="btn-inventory" onclick="showPanel('inventory-panel')">üéí Invent√°rio</button>
                <button id="btn-status" onclick="showPanel('status-panel')">üìä Status</button>
                <button id="btn-expedition" onclick="showPanel('expedition-panel')">üöÄ Expedi√ß√£o</button>
            </nav>
        </div>

        <div id="main-content">
            <div id="header">
                <h2>Her√≥i CLT</h2>
                <div class="resource-display">
                    <div class="resource-item" style="color: var(--color-energy);">‚ö° Energia: <span id="energy-count">0</span></div>
                    <div class="resource-item" style="color: var(--color-accent);">üí∞ Ouro: <span id="gold-count">0</span></div>
                    <div class="resource-item" style="color: var(--color-soul);">üíÄ Alma: <span id="soul-count">0</span></div>
                </div>
            </div>

            <div id="content-area">

                <div id="training-panel" style="display: block;">
                    
                    <div id="missions-panel" class="content-panel" style="text-align: center;">
                        <h3>Quartel-General (Preparo)</h3>
                        <p>Miss√µes de tempo para gerar recursos!</p>
                        
                        <button id="magic-study-button" onclick="startMission('magic')" style="background-color: var(--color-evolve); color: white; padding: 10px; margin: 5px;">
                            Estudo de Magia (Custo: 5 üí∞ | Ganho: 50 ‚ö°)
                        </button>
                        
                        <button id="blacksmith-work-button" onclick="startMission('blacksmith')" style="background-color: var(--color-accent); color: black; padding: 10px; margin: 5px;">
                            Trabalho no Ferreiro (+10 üí∞)
                        </button>

                        <button onclick="tradeResource('energyToGold')" style="background-color: grey; color: white; padding: 10px; margin: 5px;">
                            Vender Recursos (-50 ‚ö° | +15 üí∞)
                        </button>
                    </div>

                    <div id="evolution-panel" class="content-panel" style="text-align: center;">
                        <h3>Evolu√ß√£o & Reencarna√ß√£o</h3>
                        <p>Suba de n√≠vel e recomece mais forte!</p>
                        <p>üåü N√≠vel de Poder: <span id="power-level-display">1</span></p>
                        <p>‚ú® EXP: <span id="exp-count">0</span> / <span id="exp-required">50</span></p>
                        
                        <button id="level-up-button" onclick="levelUp()" disabled>
                            SUBIR DE N√çVEL (Falta: 50 EXP)
                        </button>
                        <button id="evolve-button" onclick="evolveHero()" disabled style="background-color: var(--color-soul);">
                            EVOLUIR (Custo: <span id="evolve-cost">100</span> ‚ö°)
                        </button>
                        <button onclick="alert('Reencarnar: Funcionalidade futura para resetar o jogo com b√¥nus de Alma.')" style="background-color: #555; color: white;">
                            REENCARNAR (Custo: 500 üíÄ)
                        </button>
                    </div>
                </div>

                <div id="adventure-panel" style="display: none;">
                    <div class="content-panel">
                        <h2>Aventura & Batalha</h2>
                        <p>Prepare-se para o combate!</p>
                        <button onclick="startBattle()">Iniciar Batalha!</button>
                    </div>
                </div>
                
                <div id="upgrades-panel" class="content-panel" style="display: none;">
                    <h2>‚ú® Upgrades de Batalha</h2>
                    <p>Gaste seu Ouro para melhorar permanentemente suas estat√≠sticas de combate!</p>
                    
                    <div style="display: flex; gap: 20px; margin-top: 20px;">
                        
                        <div class="content-panel" style="flex: 1; text-align: center;">
                            <h3>Aumento de Ataque</h3>
                            <p>‚öîÔ∏è Dano Base Atual: <span id="upgrade-atk-display">1</span></p>
                            <p>Pr√≥ximo N√≠vel: +1 ATK</p>
                            <button id="buy-atk-upgrade" onclick="buyUpgrade('atk')" style="background-color: var(--color-combat);">
                                Comprar (Custo: <span id="atk-cost">50</span> üí∞)
                            </button>
                        </div>

                        <div class="content-panel" style="flex: 1; text-align: center;">
                            <h3>Aumento de Vida</h3>
                            <p>‚ù§Ô∏è HP Base Atual: <span id="upgrade-hp-display">10</span></p>
                            <p>Pr√≥ximo N√≠vel: +10 HP</p>
                            <button id="buy-hp-upgrade" onclick="buyUpgrade('hp')" style="background-color: var(--color-hp);">
                                Comprar (Custo: <span id="hp-cost">50</span> üí∞)
                            </button>
                        </div>
                    </div>
                </div>

                <div id="equipment-panel" style="display: none;">
                    <div class="content-panel">
                        <h2>üõ°Ô∏è Equipamento</h2>
                        <p>Gerencie seus itens equipados.</p>
                    </div>
                </div>

                <div id="inventory-panel" style="display: none;">
                    <div class="content-panel">
                        <h2>üéí Invent√°rio</h2>
                        <p>Seus itens e recursos.</p>
                    </div>
                </div>

                <div id="status-panel" style="display: none;">
                    <div class="content-panel">
                        <h2>üìä Status do Her√≥i</h2>
                        <p>Estat√≠sticas detalhadas.</p>
                    </div>
                </div>

                <div id="expedition-panel" style="display: none;">
                    <div class="content-panel">
                        <h2>üöÄ Expedi√ß√£o</h2>
                        <p>Miss√µes de longa dura√ß√£o.</p>
                    </div>
                </div>

            </div>
        </div>

    </div>

    <script>
        // ====================================================================
        // I. VARI√ÅVEIS E DOM
        // ====================================================================

        // Vari√°veis do Jogo
        let powerLevel = 1;
        let gold = 0;
        let currentExp = 0;
        let expToNextLevel = 50; 
        let energy = 0; 
        let soul = 0;
        let evolveCost = 100;
        let energyPerClick = 1; // Mantida, mas n√£o usada nas miss√µes
        let clickMultiplier = 1; 
        
        // NOVAS VARI√ÅVEIS DE UPGRADE
        let heroBaseATK = 1;
        let heroBaseHP = 10;
        let atkUpgradeCost = 50;
        let hpUpgradeCost = 50;

        // Vari√°veis de Miss√£o (para Cooldown)
        let missionCooldowns = {
            magic: 0, 
            blacksmith: 0
        };

        // Refer√™ncias do DOM
        const startMenu = document.getElementById('start-menu');
        const sidebar = document.getElementById('sidebar');
        const mainContent = document.getElementById('main-content');
        
        // Display de Recursos
        const powerLevelDisplay = document.getElementById('power-level-display');
        const energyCount = document.getElementById('energy-count');
        const goldCount = document.getElementById('gold-count');
        const soulCount = document.getElementById('soul-count');
        const expCount = document.getElementById('exp-count');
        const expRequired = document.getElementById('exp-required');
        const levelUpButton = document.getElementById('level-up-button');
        const evolveCostDisplay = document.getElementById('evolve-cost');
        const evolveButton = document.getElementById('evolve-button');

        // Refer√™ncias do Painel de Upgrades
        const upgradeAtkDisplay = document.getElementById('upgrade-atk-display');
        const atkCostDisplay = document.getElementById('atk-cost');
        const upgradeHpDisplay = document.getElementById('upgrade-hp-display');
        const hpCostDisplay = document.getElementById('hp-cost');
        const buyAtkUpgradeButton = document.getElementById('buy-atk-upgrade');
        const buyHpUpgradeButton = document.getElementById('buy-hp-upgrade');

        // ====================================================================
        // II. FUN√á√ïES DE DISPLAY E NAVEGA√á√ÉO
        // ====================================================================

        // Atualiza a exibi√ß√£o na tela
        function updateDisplay() {
            // Recursos
            powerLevelDisplay.textContent = powerLevel;
            document.getElementById('power-level').textContent = powerLevel; // Sidebar
            energyCount.textContent = energy;
            goldCount.textContent = gold;
            soulCount.textContent = soul;
            expCount.textContent = currentExp;
            expRequired.textContent = expToNextLevel;

            // Evolu√ß√£o
            evolveCostDisplay.textContent = evolveCost;
            if (energy >= evolveCost) {
                evolveButton.disabled = false;
            } else {
                evolveButton.disabled = true;
            }

            // Level Up
            if (currentExp >= expToNextLevel) {
                levelUpButton.disabled = false;
                levelUpButton.textContent = 'SUBIR DE N√çVEL';
            } else {
                levelUpButton.disabled = true;
                levelUpButton.textContent = `SUBIR DE N√çVEL (Falta: ${expToNextLevel - currentExp} EXP)`;
            }

            // Upgrades
            upgradeAtkDisplay.textContent = heroBaseATK;
            atkCostDisplay.textContent = atkUpgradeCost;
            upgradeHpDisplay.textContent = heroBaseHP;
            hpCostDisplay.textContent = hpUpgradeCost;

            buyAtkUpgradeButton.disabled = gold < atkUpgradeCost;
            buyHpUpgradeButton.disabled = gold < hpUpgradeCost;
            
        }

        // Esconde o menu inicial e mostra o jogo
        function startGame() {
            startMenu.style.display = 'none';
            sidebar.style.display = 'block';
            updateDisplay();
        }

        // Alterna entre os pain√©is de conte√∫do
        function showPanel(panelId) {
            // Esconde todos os pain√©is
            const panels = document.querySelectorAll('#content-area > div');
            panels.forEach(panel => panel.style.display = 'none');

            // Mostra o painel selecionado
            document.getElementById(panelId).style.display = 'block';

            // Atualiza o estado ativo dos bot√µes da sidebar
            const sidebarButtons = document.querySelectorAll('.sidebar-menu button');
            sidebarButtons.forEach(btn => btn.classList.remove('active'));
            document.getElementById('btn-' + panelId.split('-')[0]).classList.add('active');
            
            updateDisplay();
        }

        // ====================================================================
        // III. FUN√á√ïES DE SALVAR/CARREGAR (localStorage)
        // ====================================================================

        // Salva o Estado do Jogo no Navegador
        function saveGame() {
            const gameData = {
                level: powerLevel,
                exp: currentExp,
                expRequired: expToNextLevel,
                energy: energy,
                gold: gold,
                soul: soul,
                // Vari√°veis de Upgrades e Evolu√ß√£o
                energyPerClick: energyPerClick, 
                heroHP: heroBaseHP,
                heroATK: heroBaseATK,
                atkCost: atkUpgradeCost,
                hpCost: hpUpgradeCost,
                // Cooldowns de Miss√£o
                missionCooldowns: missionCooldowns 
            };
            localStorage.setItem('blazeAndSteelSave', JSON.stringify(gameData));
            alert('Jogo Salvo com Sucesso!');
        }

        // Carrega o Estado do Jogo Salvo
        function loadGame() {
            const savedData = localStorage.getItem('blazeAndSteelSave');

            if (savedData) {
                const gameData = JSON.parse(savedData); 

                // Carrega Vari√°veis Principais
                powerLevel = gameData.level || 1;
                currentExp = gameData.exp || 0;
                expToNextLevel = gameData.expRequired || 50;
                energy = gameData.energy || 0;
                gold = gameData.gold || 0;
                soul = gameData.soul || 0;
                
                // Carrega Upgrades e Evolu√ß√£o
                energyPerClick = gameData.energyPerClick || 1;
                heroBaseHP = gameData.heroHP || 10;
                heroBaseATK = gameData.heroATK || 1;
                atkUpgradeCost = gameData.atkCost || 50;
                hpUpgradeCost = gameData.hpCost || 50;

                // Carrega Cooldowns (apenas se for maior que zero, para evitar bugs de tempo)
                missionCooldowns = gameData.missionCooldowns || { magic: 0, blacksmith: 0 };
                // Reinicia a contagem dos Cooldowns ativos
                for (const key in missionCooldowns) {
                    if (missionCooldowns[key] > 0) {
                        startMission(key, missionCooldowns[key]); 
                    }
                }

                updateDisplay();
                startGame(); 
                alert('Jogo Carregado com Sucesso!');
            } else {
                alert('Nenhum jogo salvo encontrado.');
            }
        }

        // ====================================================================
        // IV. FUN√á√ïES DE PROGRESS√ÉO E RECURSOS
        // ====================================================================
        
        // 1. Level Up
        function levelUp() {
            if (currentExp >= expToNextLevel) {
                currentExp -= expToNextLevel;
                powerLevel++;
                expToNextLevel = Math.round(expToNextLevel * 1.5); // Aumenta o custo exponencialmente
                
                alert(`Parab√©ns! Voc√™ alcan√ßou o N√≠vel ${powerLevel}!`);
                updateDisplay();
            }
        }
        
        // 2. Evoluir Her√≥i (Gasta Energia, Aumenta base de clique/ganho futuro)
        function evolveHero() {
            if (energy >= evolveCost) {
                energy -= evolveCost;
                energyPerClick += 1; // Aumenta o ganho b√°sico de energia para futuras miss√µes/cliques
                evolveCost = Math.round(evolveCost * 1.5); // Aumenta o custo
                
                alert(`‚ö° Seu Her√≥i evoluiu! O ganho de energia aumentou.`);
                
                updateDisplay();
            }
        }
        
        // 3. Compra de Upgrades (ATK/HP)
        function buyUpgrade(type) {
            if (type === 'atk' && gold >= atkUpgradeCost) {
                gold -= atkUpgradeCost;
                heroBaseATK += 1;
                atkUpgradeCost = Math.round(atkUpgradeCost * 1.5); 
                alert(`‚öîÔ∏è Ataque Base aumentado para ${heroBaseATK}!`);
            
            } else if (type === 'hp' && gold >= hpUpgradeCost) {
                gold -= hpUpgradeCost;
                heroBaseHP += 10;
                hpUpgradeCost = Math.round(hpUpgradeCost * 1.5); 
                alert(`‚ù§Ô∏è HP Base aumentado para ${heroBaseHP}!`);
            
            } else {
                alert("Voc√™ n√£o tem Ouro suficiente para este upgrade!");
                return;
            }

            updateDisplay();
        }

        // 4. In√≠cio de Miss√µes Baseadas em Tempo
        function startMission(missionType, initialDuration = 0) {
            if (missionCooldowns[missionType] > 0 && initialDuration === 0) {
                alert(`Espere! A miss√£o ${missionType} ainda est√° em cooldown.`);
                return;
            }

            let cost = 0;
            let duration = initialDuration > 0 ? initialDuration : 30; // 30s padr√£o
            let rewards = {};
            const button = document.getElementById(`${missionType}-button`);

            if (missionType === 'magic') {
                cost = 5;
                rewards = { energy: 50 };
                if (gold < cost) {
                    alert("Ouro insuficiente para estudar magia.");
                    return;
                }
                if (initialDuration === 0) gold -= cost; // S√≥ subtrai o custo se for o in√≠cio de uma nova miss√£o
            } else if (missionType === 'blacksmith') {
                rewards = { gold: 10 };
            }

            // Inicia o Cooldown e Atualiza o Bot√£o
            missionCooldowns[missionType] = duration;
            button.disabled = true;

            const interval = setInterval(() => {
                missionCooldowns[missionType]--;
                button.textContent = `Em Progresso... (${missionCooldowns[missionType]}s restantes)`;

                if (missionCooldowns[missionType] <= 0) {
                    clearInterval(interval);
                    
                    // Concede Recompensas (Aplica o multiplicador de Evolu√ß√£o no ganho de energia)
                    if (rewards.energy) energy += rewards.energy * energyPerClick;
                    if (rewards.gold) gold += rewards.gold;

                    button.textContent = `Miss√£o Completa!`;
                    
                    // Reseta o texto do bot√£o ap√≥s 5s e o habilita
                    setTimeout(() => {
                        if (missionType === 'magic') button.textContent = `Estudo de Magia (Custo: 5 üí∞ | Ganho: ${50 * energyPerClick} ‚ö°)`;
                        if (missionType === 'blacksmith') button.textContent = `Trabalho no Ferreiro (+10 üí∞)`;
                        button.disabled = false;
                    }, 5000);

                    updateDisplay();
                }
            }, 1000);
            updateDisplay();
        }

        // 5. Fun√ß√£o de Troca de Recursos (Vender)
        function tradeResource(tradeType) {
            if (tradeType === 'energyToGold') {
                const costEnergy = 50;
                const gainGold = 15;
                
                if (energy >= costEnergy) {
                    energy -= costEnergy;
                    gold += gainGold;
                    alert(`Voc√™ vendeu 50 ‚ö° por 15 üí∞!`);
                    updateDisplay();
                } else {
                    alert("Energia insuficiente para vender recursos.");
                }
            }
        }
        
        // 6. Placeholder para Iniciar Batalha
        function startBattle() {
            alert('A Batalha ainda n√£o foi implementada! Pr√≥ximo passo!');
        }

        // ====================================================================
        // V. INICIALIZA√á√ÉO
        // ====================================================================

        // Tenta carregar o jogo salvo ao iniciar a p√°gina (caso o jogador retorne)
        loadGame();
        
        // Se o jogo for carregado, o startGame() √© chamado dentro de loadGame().
        // Caso contr√°rio, o menu inicial permanece vis√≠vel.
    </script>

</body>
</html>
