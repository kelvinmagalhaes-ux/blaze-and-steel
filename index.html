<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>BLAZE AND STEEL</title>
    <style>
        /* Vari√°veis de Cores (CSS Custom Properties) */
        :root {
            --color-primary: #1e1e2d;
            --color-secondary: #36364f;
            --color-text: #e0e0e0;
            --color-accent: #f39c12; /* Ouro */
            --color-combat: #c0392b; /* Combate/Aventura */
            --color-evolve: #8e44ad; /* Evoluir/Treinamento */
            --color-energy: #3498db; /* Energia */
            --color-soul: #9b59b6; /* Alma/Reencarna√ß√£o */
            --color-hp: #2ecc71; /* HP/Vida */
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background-color: var(--color-primary);
            color: var(--color-text);
            margin: 0;
            display: flex;
            min-height: 100vh;
            overflow: hidden; 
        }

        /* Estrutura Geral */
        #app-wrapper {
            display: flex;
            width: 100%;
        }

        /* Sidebar (Menu Lateral) */
        #sidebar {
            width: 200px;
            background-color: var(--color-secondary);
            padding: 20px 0;
            box-shadow: 2px 0 5px rgba(0, 0, 0, 0.5);
            display: none; 
            flex-shrink: 0; 
        }

        .sidebar-menu button {
            display: block;
            width: 100%;
            padding: 15px 20px;
            text-align: left;
            background: none;
            border: none;
            color: var(--color-text);
            font-size: 1.1em;
            cursor: pointer;
            transition: background-color 0.2s, color 0.2s;
            display: flex; 
            align-items: center;
        }

        .sidebar-menu button:hover {
            background-color: rgba(255, 255, 255, 0.1);
        }

        .sidebar-menu button.active {
            background-color: var(--color-evolve);
            font-weight: bold;
            color: white; 
        }
        
        .sidebar-menu button::before {
            content: ''; 
            margin-right: 10px;
            font-size: 1.2em;
            width: 25px; 
            text-align: center;
        }
        
        /* Defini√ß√£o de √çcones */
        #btn-training::before { content: 'üè†'; color: var(--color-evolve); } 
        #btn-adventure::before { content: 'üó∫Ô∏è'; color: var(--color-combat); } 
        #btn-upgrades::before { content: '‚è´'; color: var(--color-accent); } 
        #btn-inventory::before { content: 'üì¶'; color: var(--color-hp); } 
        #btn-status::before { content: 'üë§'; color: var(--color-soul); } 
        #btn-expedition::before { content: 'üß≠'; color: #f1c40f; } 


        /* √Årea de Conte√∫do Principal */
        #main-content {
            flex-grow: 1;
            padding: 20px;
            overflow-y: auto;
            max-height: 100vh;
            display: none; 
            position: relative; 
        }
        
        /* Bot√£o de √Åudio (Dentro do Jogo) */
        #audio-control-button {
            background-color: var(--color-secondary);
            border: 1px solid var(--color-accent);
            color: var(--color-text);
            padding: 8px 15px;
            border-radius: 5px;
            cursor: pointer;
            z-index: 10;
        }

        /* Pain√©is de Conte√∫do (Geral) */
        .content-panel {
            background-color: var(--color-secondary);
            padding: 20px;
            border-radius: 8px;
            margin-bottom: 20px;
        }

        /* Menu Inicial (Start Menu) */
        #start-menu {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            width: 100%;
            height: 100vh;
            position: fixed; 
            top: 0;
            left: 0;
            background-color: var(--color-primary);
            z-index: 100;
        }
        
        .game-logo {
            max-width: 90%;
            width: 500px;
            height: auto;
            margin-bottom: 50px;
            image-rendering: -webkit-optimize-contrast;
            image-rendering: crisp-edges;
        }

        .menu-button-stack button {
            display: block;
            width: 300px;
            padding: 15px 20px;
            margin: 10px 0;
            border: 2px solid var(--color-accent);
            border-radius: 5px;
            background-color: var(--color-combat);
            color: var(--color-text);
            font-size: 1.2em;
            cursor: pointer;
            transition: background-color 0.2s, transform 0.1s;
            box-shadow: 0 4px var(--color-accent);
        }

        .menu-button-stack button:hover {
            background-color: #e74c3c;
            transform: translateY(-2px);
            box-shadow: 0 6px var(--color-accent);
        }

        .menu-button-stack button:active {
            transform: translateY(2px);
            box-shadow: 0 2px var(--color-accent);
        }
        
        /* Estilo para o Slider de Volume */
        .volume-control-container {
            margin-top: 20px;
            padding: 10px;
            background-color: var(--color-secondary);
            border-radius: 5px;
            width: 300px;
            text-align: center;
        }

        .volume-control-container label {
            display: block;
            margin-bottom: 5px;
            font-weight: bold;
        }
        
        /* Ajuste a posi√ß√£o do controle de volume para o menu inicial */
        #start-menu .volume-control-container {
            position: absolute;
            bottom: 33px; 
            left: 50%;
            transform: translateX(-50%);
            width: 90%; 
            max-width: 300px;
        }


        /* Painel de Cria√ß√£o de Personagem - ESTILO ISOLADO */
        #character-creation-panel {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: var(--color-primary);
            z-index: 99;
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 20px;
            overflow-y: auto;
            box-sizing: border-box;
        }

        #character-creation-panel .content-panel {
            max-width: 600px;
            margin: auto;
            padding: 30px;
            border: 2px solid var(--color-accent);
        }
        
        /* Header e Display de Recursos */
        #header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 0 20px 20px 0;
            border-bottom: 1px solid var(--color-secondary);
            margin-bottom: 20px;
        }

        .resource-display {
            display: flex;
            gap: 15px;
        }

        .resource-item {
            font-size: 1.1em;
            font-weight: bold;
        }

        .resource-item span {
            margin-left: 5px;
        }
        
        /* Bot√µes de A√ß√£o (Geral) */
        button:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }
        
        /* Estilo do Bot√£o Level Up */
        #hero-training-panel button#level-up-button {
            background-color: var(--color-evolve);
            color: white;
            border: none;
            padding: 10px 15px;
            border-radius: 5px;
            margin-top: 10px;
            cursor: pointer;
            transition: background-color 0.2s;
        }

        #hero-training-panel button#level-up-button:hover:not(:disabled) {
            background-color: #6c3483;
        }
        
        /* Estilo para o logo ADVENTURE */
        #adventure-title-logo {
            display: block;
            margin: 0 auto 20px auto;
            max-width: 300px; 
            height: auto;
            image-rendering: -webkit-optimize-contrast;
            image-rendering: crisp-edges;
        }

        /* Estilo para os bot√µes de sele√ß√£o de classe */
        #class-selection-container button {
            background-color: var(--color-secondary); 
            color: var(--color-text); 
            border: 2px solid var(--color-primary); 
            padding: 10px 15px; 
            border-radius: 5px; 
            cursor: pointer;
            width: 150px;
            height: 150px;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            transition: border-color 0.2s, background-color 0.2s;
        }
        
        #class-selection-container button img {
            max-width: 80px; 
            max-height: 80px; 
            margin-bottom: 5px;
            border-radius: 5px;
            background-color: #34495e; /* Placeholder */
            width: 80px;
            height: 80px;
            object-fit: cover;
        }
        
        #class-selection-container button:hover {
            border-color: var(--color-energy);
        }
    </style>
</head>
<body>
    
    <audio id="game-theme-music" loop>
        Seu navegador n√£o suporta a tag de √°udio.
    </audio>

    <div id="app-wrapper">

        <div id="start-menu">
            <h1 style="color: var(--color-accent);">BLAZE AND STEEL</h1>
            
            <div class="menu-button-stack">
                <button onclick="showCharacterCreation()">NOVO JOGO</button> 
                <button onclick="loadGame(true)">CARREGAR JOGO</button>
                <button onclick="alert('Sair: Por enquanto, feche a aba.')">SAIR</button>
            </div>
            
            <div class="volume-control-container">
                <label for="volume-slider-start">üé∂ Volume: <span id="volume-label-start">100</span></label>
                <input type="range" id="volume-slider-start" min="0" max="100" value="100" oninput="setVolume(this.value)">
            </div>
        </div>

        <div id="character-creation-panel" style="display: none;">
            <div class="content-panel" style="text-align: center;">
                <h2>Crie Seu Her√≥i!</h2>
                <p>Escolha um nome e uma classe para come√ßar sua aventura.</p>
                
                <div style="margin: 20px 0;">
                    <label for="hero-name-input" style="font-weight: bold; display: block; margin-bottom: 5px;">Nome do Her√≥i:</label>
                    <input type="text" id="hero-name-input" placeholder="Ex: Her√≥i Blaze" maxlength="20" style="padding: 10px; font-size: 1.2em; width: 80%; max-width: 300px; border-radius: 5px; border: 1px solid var(--color-accent); background-color: var(--color-primary); color: var(--color-text);">
                </div>
                
                <h3>Selecione Sua Classe:</h3>
                <div id="class-selection-container" style="display: flex; justify-content: center; flex-wrap: wrap; gap: 15px;">
                    </div>
                
                <div id="class-details" class="content-panel" style="margin-top: 20px; display: none; text-align: left; max-width: 500px; margin-left: auto; margin-right: auto;">
                    <h4>Detalhes da Classe Selecionada</h4>
                    <p><strong>Classe:</strong> <span id="selected-class-name"></span></p>
                    <p><strong>Estat√≠sticas Iniciais:</strong></p>
                    <ul>
                        <li>‚ù§Ô∏è HP Base: <span id="class-base-hp"></span></li>
                        <li>‚öîÔ∏è ATK Base: <span id="class-base-atk"></span></li>
                        <li>‚ö° Energia Inicial: <span id="class-initial-energy"></span></li>
                    </ul>
                    <p style="font-style: italic;"></p>
                    
                    <button id="confirm-creation-button" disabled onclick="finalizeCreation()" style="background-color: var(--color-evolve); color: white; padding: 12px 25px; border: none; border-radius: 5px; margin-top: 15px; width: 100%;">
                        INICIAR JOGO!
                    </button>
                </div>
            </div>
        </div>

        <div id="sidebar">
            <div id="hero-info" style="text-align: center; margin-bottom: 20px;">
                <h3 id="hero-name"></h3>
                <p>N√≠vel: <span id="power-level">1</span></p>
            </div>
            <nav class="sidebar-menu">
                <button id="btn-training" onclick="showPanel('training-panel')" class="active">Quartel-General</button>
                <button id="btn-adventure" onclick="showPanel('adventure-panel')">Aventura</button>
                <button id="btn-upgrades" onclick="showPanel('upgrades-panel')">Upgrades</button>
                <button id="btn-inventory" onclick="showPanel('inventory-panel')">Invent√°rio</button> 
                <button id="btn-status" onclick="showPanel('status-panel')">Status</button>
                <button id="btn-expedition" onclick="showPanel('expedition-panel')">Expedi√ß√£o</button>
            </nav>
        </div>

        <div id="main-content">
            
            <div style="position: absolute; top: 10px; right: 10px; z-index: 10; text-align: right;">
                <button id="audio-control-button" onclick="toggleMute()" style="margin-bottom: 5px;">
                    üîä Mute
                </button>
                
                <div class="volume-control-container" style="width: 150px; padding: 5px; margin-left: auto;">
                    <label for="volume-slider-game" style="font-size: 0.8em; margin: 0;">Volume: <span id="volume-label-game">100</span></label>
                    <input type="range" id="volume-slider-game" min="0" max="100" value="100" oninput="setVolume(this.value)">
                </div>
            </div>


            <div id="header">
                <h2></h2>
                <div class="resource-display">
                    <div class="resource-item" style="color: var(--color-energy);">‚ö° Energia: <span id="energy-count">0</span></div>
                    <div class="resource-item" style="color: var(--color-accent);">üí∞ Ouro: <span id="gold-count">0</span></div>
                    <div class="resource-item" style="color: var(--color-soul);">üíÄ Alma: <span id="soul-count">0</span></div>
                </div>
            </div>

            <div id="content-area">
                
                <div id="training-panel" style="display: none;">
                    
                    <div id="special-missions-panel" class="content-panel" style="text-align: center;">
                        <h3>Miss√µes Especiais</h3>
                        <p>Progresso r√°pido e recompensas raras!</p>

                        <div id="daily-missions" style="margin-bottom: 15px;">
                            <h4>Di√°rias (Reseta em 24h)</h4>
                            <button id="daily-scouting" class="mission-button mission-daily" onclick="startDailyMission('scouting')">
                                Fazer Patrulha (Recompensa: 100 EXP | 50 üí∞)
                            </button>
                            <button id="daily-training-drills" class="mission-button mission-daily" onclick="startDailyMission('drills')">
                                Exerc√≠cios de Treinamento (Recompensa: 200 EXP | +2 ATK B√¥nus!)
                            </button>
                        </div>

                        <div id="unique-missions">
                            <h4>√önicas (Desaparecem ap√≥s concluir)</h4>
                            <button id="unique-first-quest" class="mission-button mission-unique" onclick="startUniqueMission('firstQuest')">
                                Provar o Valor (Recompensa: 500 EXP | +10 HP B√¥nus!)
                            </button>
                            <button id="unique-tutorial-complete" class="mission-button mission-unique" onclick="startUniqueMission('tutorialComplete')">
                                Finalizar Tutorial B√°sico (Recompensa: 100 üí∞ | 100 ‚ö°)
                            </button>
                        </div>
                    </div>

                    <div id="resource-missions-panel" class="content-panel" style="text-align: center;">
                        <h3>Obten√ß√£o de Recursos (Cooldowns)</h3>
                        
                        <button id="provisions-button" onclick="startMission('provisions')" style="background-color: var(--color-energy); color: black; padding: 10px; margin: 5px;">
                            Coletar Provis√µes (30s | Ganho: 50 ‚ö°)
                        </button>
                        
                        <button id="work-gold-button" onclick="startMission('workGold')" style="background-color: var(--color-accent); color: black; padding: 10px; margin: 5px;">
                            Trabalhar por Ouro (60s | Ganho: 20 üí∞)
                        </button>
                    </div>

                    <div id="hero-training-panel" class="content-panel" style="text-align: center;">
                        <h3>Treinamento & Progresso</h3>
                        <p>Gaste Energia para aumentar sua EXP e preparo.</p>

                        <button onclick="trainForStats('attack')" style="background-color: var(--color-combat); color: white; padding: 10px; margin: 5px;">
                            Estudar T√°ticas (Custo: 25 ‚ö° | Ganho: 10 EXP)
                        </button>
                        
                        <button onclick="trainForStats('defense')" style="background-color: var(--color-hp); color: white; padding: 10px; margin: 5px;">
                            Preparar Defesas (Custo: 25 ‚ö° | Ganho: 10 EXP)
                        </button>

                        <div style="margin-top: 20px;">
                            <p>üåü N√≠vel de Poder: <span id="power-level-display">1</span></p>
                            <p>‚ú® EXP: <span id="exp-count">0</span> / <span id="exp-required">50</span></p>
                            <button id="level-up-button" onclick="levelUp()" disabled style="background-color: var(--color-evolve); color: white;">
                                SUBIR DE N√çVEL (Falta: 50 EXP)
                            </button>
                        </div>
                    </div>
                </div>

                <div id="adventure-panel" style="display: none;">
                    
                    <h2 style="text-align: center; color: var(--color-combat);">Aventura (Combate)</h2>
                    
                    <div class="content-panel" style="display: flex; justify-content: space-between;">
                        
                        <div style="flex: 1; margin-right: 20px;">
                            <h2 id="monster-name">Monstro</h2>
                            <div id="monster-image" style="background-color: #7f8c8d; width: 150px; height: 150px; border-radius: 8px; margin-bottom: 10px; text-align: center; line-height: 150px; font-size: 0.9em;">
                                (Imagem do Monstro)
                            </div>
                            <p>‚ù§Ô∏è HP: <span id="monster-hp-display">0</span> / 0</p>
                            <p>‚öîÔ∏è ATK: <span id="monster-atk-display">0</span></p>
                            <p style="font-size: 0.9em;">Recompensa: <span id="monster-reward-exp">0</span> EXP, <span id="monster-reward-gold">0</span> üí∞</p>
                            
                            <button id="start-battle-button" onclick="startBattle()" style="background-color: var(--color-combat); color: white; padding: 10px 20px; margin-top: 15px;">
                                Iniciar Batalha! (Custo: 5 ‚ö°)
                            </button>
                        </div>

                        <div style="flex: 2; background-color: #2c3e50; padding: 15px; border-radius: 5px; height: 250px; overflow-y: auto;">
                            <h3>üìù Log de Combate</h3>
                            <div id="combat-log">
                                <p>A batalha come√ßar√° aqui. Selecione um monstro.</p>
                            </div>
                        </div>
                    </div>
                    
                    <div class="content-panel">
                        <h3>Estat√≠sticas de Batalha do Her√≥i</h3>
                        <div id="hero-battle-stats" style="display: flex; justify-content: space-around; text-align: center;">
                            <p>‚ù§Ô∏è HP: <span id="hero-current-hp">10</span> / <span id="hero-max-hp">10</span></p>
                            <p>‚öîÔ∏è ATK: <span id="hero-total-atk">1</span></p>
                            <p>üí• Dano por N√≠vel: x<span id="hero-level-multiplier">1</span></p>
                        </div>
                    </div>

                    <div class="content-panel">
                        <h3>Skills Ativas</h3>
                        <p>Use a seu favor em combate! (Funcionalidade futura)</p>
                        <button disabled style="background-color: #3498db;">Ataque Forte (5 ‚ö°)</button>
                        <button disabled style="background-color: #2ecc71;">Cura R√°pida (10 üí∞)</button>
                    </div>
                </div>

                
                <div id="upgrades-panel" class="content-panel" style="display: none;">
                    <h2>‚ú® Upgrades de Batalha</h2>
                    <p>Gaste seu Ouro para melhorar permanentemente suas estat√≠sticas de combate!</p>
                    
                    <div style="display: flex; gap: 20px; margin-top: 20px;">
                        
                        <div class="content-panel" style="flex: 1; text-align: center;">
                            <h3>Aumento de Ataque</h3>
                            <p>‚öîÔ∏è Dano Base Atual: <span id="upgrade-atk-display">1</span></p>
                            <p>Pr√≥ximo N√≠vel: +1 ATK</p>
                            <button id="buy-atk-upgrade" onclick="buyUpgrade('atk')" style="background-color: var(--color-combat);">
                                Comprar (Custo: <span id="atk-cost">50</span> üí∞)
                            </button>
                        </div>

                        <div class="content-panel" style="flex: 1; text-align: center;">
                            <h3>Aumento de Vida</h3>
                            <p>‚ù§Ô∏è HP Base Atual: <span id="upgrade-hp-display">10</span></p>
                            <p>Pr√≥ximo N√≠vel: +10 HP</p>
                            <button id="buy-hp-upgrade" onclick="buyUpgrade('hp')" style="background-color: var(--color-hp);">
                                Comprar (Custo: <span id="hp-cost">50</span> üí∞)
                            </button>
                        </div>
                    </div>
                </div>

                <div id="inventory-panel" class="content-panel" style="display: none;">
                    <h2>üì¶ Invent√°rio</h2>
                    <p>Aqui voc√™ poder√° ver e gerenciar seus itens e equipamentos. (Funcionalidade a ser implementada)</p>
                    
                    <div id="equipment-display" style="border: 1px solid #7f8c8d; padding: 15px; margin-top: 15px;">
                        <h3>Equipamento Atual</h3>
                        <p>Arma: Nenhuma</p>
                        <p>Armadura: Nenhuma</p>
                        </div>
                    
                    <div id="item-list" style="border: 1px solid #7f8c8d; padding: 15px; margin-top: 15px; max-height: 200px; overflow-y: auto;">
                        <h3>Itens no Estoque (Placeholder)</h3>
                        <p>Voc√™ n√£o tem itens no estoque (ainda).</p>
                    </div>

                </div>

                
                <div id="status-panel" style="display: none;">
                    <div class="content-panel"><h2>üë§ Status do Her√≥i</h2><p>Estat√≠sticas detalhadas. (Em breve!)</p></div>
                </div>
                <div id="expedition-panel" style="display: none;">
                    <div class="content-panel"><h2>üß≠ Expedi√ß√£o</h2><p>Miss√µes de longa dura√ß√£o.</p></div>
                </div>

            </div>
        </div>

    </div>

    <script>
        // ====================================================================
        // I. VARI√ÅVEIS E DOM
        // ====================================================================

        // Vari√°veis do Jogo
        let heroName = "Novo Her√≥i";
        let powerLevel = 1;
        let gold = 0;
        let currentExp = 0;
        let expToNextLevel = 50; 
        let energy = 0; 
        let soul = 0;
        let energyPerClick = 1; 
        let heroImage = ""; // Corrigido para ser uma string vazia
        
        // Vari√°veis de UPGRADE
        let heroBaseATK = 1;
        let heroBaseHP = 10;
        let atkUpgradeCost = 50;
        let hpUpgradeCost = 50;

        // Vari√°veis de Combate
        let isFighting = false;
        let heroCurrentHP = 10;
        let heroMaxHP = 10; 
        let currentMonster = null; 
        
        // Vari√°vel da Classe
        let selectedClass = null; 
        
        // Estrutura de Invent√°rio (Simplificada)
        let inventory = [];

        // Vari√°veis de √Åudio
        let currentVolume = 1.0; 
        let hasInteracted = false; 

        // Estrutura de Classes do Personagem (CORRIGIDO: Removido o imagePath para evitar o bug)
        const CLASSES = {
            warrior: {
                name: "Guerreiro",
                description: "Especialista em combate corpo-a-corpo, focado em vida e dano balanceado.",
                initialHP: 15,
                initialATK: 2,
                initialEnergy: 50,
                imagePath: "assets/placeholder_warrior.png" // Voltei o placeholder para a fun√ß√£o de cria√ß√£o
            },
            mage: {
                name: "Mago",
                description: "Fr√°gil, mas com alto potencial de dano m√°gico e grande reserva de energia.",
                initialHP: 8,
                initialATK: 1, 
                initialEnergy: 150,
                imagePath: "assets/placeholder_mage.png"
            },
            archer: {
                name: "Arqueiro",
                description: "R√°pido e preciso, com bom equil√≠brio entre ataque e defesa.",
                initialHP: 10,
                initialATK: 1,
                initialEnergy: 75,
                imagePath: "assets/placeholder_archer.png"
            },
            fighter: {
                name: "Lutador",
                description: "Focado em defesa e recupera√ß√£o, o lutador √© dif√≠cil de derrubar.",
                initialHP: 20,
                initialATK: 1,
                initialEnergy: 75,
                imagePath: "assets/placeholder_fighter.png"
            }
        };

        // Vari√°veis de Miss√£o
        let missionCooldowns = { provisions: 0, workGold: 0 };
        const DAILY_COOLDOWN_MS = 24 * 60 * 60 * 1000;
        let dailyMissionStatus = {
            scouting: { completedAt: 0 },
            drills: { completedAt: 0 }
        };
        let uniqueMissionStatus = {
            firstQuest: { completed: false },
            tutorialComplete: { completed: false }
        };

        // Monstro
        const MONSTERS_BY_LEVEL = {
            1: [
                { name: "Slime Iniciante", baseHP: 20, atk: 2, expReward: 30, goldReward: 5, energyCost: 5 },
                { name: "Mosquito Mutante", baseHP: 15, atk: 3, expReward: 35, goldReward: 6, energyCost: 5 }
            ],
            2: [
                { name: "Lobo Faminto", baseHP: 45, atk: 8, expReward: 70, goldReward: 15, energyCost: 7 },
                { name: "Cogumelo Venenoso", baseHP: 60, atk: 5, expReward: 65, goldReward: 12, energyCost: 7 }
            ],
            3: [
                { name: "Bandido de Estrada", baseHP: 80, atk: 12, expReward: 120, goldReward: 25, energyCost: 10 },
                { name: "Golem de Pedra Pequeno", baseHP: 150, atk: 5, expReward: 110, goldReward: 20, energyCost: 10 }
            ]
        };


        // Refer√™ncias do DOM
        const startMenu = document.getElementById('start-menu');
        const sidebar = document.getElementById('sidebar');
        const mainContent = document.getElementById('main-content');
        
        // Display de Recursos e N√≠vel
        const powerLevelDisplay = document.getElementById('power-level-display');
        const energyCount = document.getElementById('energy-count');
        const goldCount = document.getElementById('gold-count');
        const soulCount = document.getElementById('soul-count');
        const expCount = document.getElementById('exp-count');
        const expRequired = document.getElementById('exp-required');
        const levelUpButton = document.getElementById('level-up-button');
        
        // Refer√™ncias de NOME e T√çTULO
        const heroNameInput = document.getElementById('hero-name-input');
        const heroNameDisplay = document.getElementById('hero-name');
        const headerTitle = document.querySelector('#header h2');
        
        // Refer√™ncias do Painel de Cria√ß√£o
        const characterCreationPanel = document.getElementById('character-creation-panel');
        const classContainer = document.getElementById('class-selection-container');
        const classDetailsPanel = document.getElementById('class-details');
        const confirmCreationButton = document.getElementById('confirm-creation-button');


        // Refer√™ncias do Painel de Upgrades
        const upgradeAtkDisplay = document.getElementById('upgrade-atk-display');
        const atkCostDisplay = document.getElementById('atk-cost');
        const upgradeHpDisplay = document.getElementById('upgrade-hp-display');
        const hpCostDisplay = document.getElementById('hp-cost');
        const buyAtkUpgradeButton = document.getElementById('buy-atk-upgrade');
        const buyHpUpgradeButton = document.getElementById('buy-hp-upgrade');
        
        // Refer√™ncias do Painel Aventura
        const combatLog = document.getElementById('combat-log');
        const startBattleButton = document.getElementById('start-battle-button');
        const heroCurrentHPDisplay = document.getElementById('hero-current-hp');
        const heroMaxHPDisplay = document.getElementById('hero-max-hp');
        const heroTotalATKDisplay = document.getElementById('hero-total-atk');
        const heroLevelMultiplierDisplay = document.getElementById('hero-level-multiplier');
        const monsterHPDisplay = document.getElementById('monster-hp-display');
        const monsterATKDisplay = document.getElementById('monster-atk-display');

        // Refer√™ncias de √Åudio
        const gameThemeMusic = document.getElementById('game-theme-music');
        const audioControlButton = document.getElementById('audio-control-button');
        const volumeSliderStart = document.getElementById('volume-slider-start');
        const volumeLabelStart = document.getElementById('volume-label-start');
        const volumeSliderGame = document.getElementById('volume-slider-game');
        const volumeLabelGame = document.getElementById('volume-label-game');


        // ====================================================================
        // II. FUN√á√ïES DE DISPLAY E NAVEGA√á√ÉO
        // ====================================================================

        // Alterna a visualiza√ß√£o dos pain√©is
        function showPanel(panelId) {
            document.querySelectorAll('#content-area > div').forEach(panel => {
                panel.style.display = 'none';
            });
            document.getElementById(panelId).style.display = 'block';
            
            document.querySelectorAll('.sidebar-menu button').forEach(button => {
                button.classList.remove('active');
            });
            document.getElementById(`btn-${panelId.replace('-panel', '')}`).classList.add('active');
            
            // Atualiza o t√≠tulo do cabe√ßalho
            const titleMap = {
                'training-panel': 'Quartel-General',
                'adventure-panel': 'Aventura',
                'upgrades-panel': 'Upgrades',
                'inventory-panel': 'Invent√°rio',
                'status-panel': 'Status',
                'expedition-panel': 'Expedi√ß√£o'
            };
            document.querySelector('#header h2').textContent = titleMap[panelId] || heroName;
            
            updateDisplay();
        }

        // Atualiza a exibi√ß√£o na tela
        function updateDisplay() {
            // NOME
            heroNameDisplay.textContent = heroName;
            
            // Recursos
            powerLevelDisplay.textContent = powerLevel;
            document.getElementById('power-level').textContent = powerLevel; 
            energyCount.textContent = energy;
            goldCount.textContent = gold;
            soulCount.textContent = soul;
            expCount.textContent = currentExp;
            expRequired.textContent = expToNextLevel;

            // Level Up
            if (currentExp >= expToNextLevel) {
                levelUpButton.disabled = false;
                levelUpButton.textContent = 'SUBIR DE N√çVEL';
            } else {
                levelUpButton.disabled = true;
                levelUpButton.textContent = `SUBIR DE N√çVEL (Falta: ${expToNextLevel - currentExp} EXP)`;
            }

            // Upgrades
            upgradeAtkDisplay.textContent = heroBaseATK;
            atkCostDisplay.textContent = atkUpgradeCost;
            upgradeHpDisplay.textContent = heroBaseHP;
            hpCostDisplay.textContent = hpUpgradeCost;

            buyAtkUpgradeButton.disabled = gold < atkUpgradeCost;
            buyHpUpgradeButton.disabled = gold < hpUpgradeCost;

            // Miss√µes
            updateMissionButtons();
            
            // Combate
            updateAdventurePanel();
            
            // √Åudio
            const volValue = Math.round(currentVolume * 100);
            if (volumeSliderStart) {
                volumeSliderStart.value = volValue;
                volumeLabelStart.textContent = volValue;
            }
            if (volumeSliderGame) {
                volumeSliderGame.value = volValue;
                volumeLabelGame.textContent = volValue;
            }
            
            audioControlButton.textContent = gameThemeMusic.muted ? 'üîá Unmute' : 'üîä Mute';
        }

        // ====================================================================
        // III. FUN√á√ïES DE √ÅUDIO E SAVE
        // ====================================================================

        function checkAndPlayMusic() {
            if (hasInteracted && gameThemeMusic.paused) {
                gameThemeMusic.volume = currentVolume;
                gameThemeMusic.play().catch(error => {
                    console.warn("M√∫sica n√£o p√¥de ser iniciada automaticamente. Erro:", error);
                });
            }
        }

        function setVolume(volume) {
            currentVolume = volume / 100;
            gameThemeMusic.volume = currentVolume;
            volumeLabelStart.textContent = volume;
            if(volumeLabelGame) volumeLabelGame.textContent = volume;
            saveGame();
        }

        function toggleMute() {
            gameThemeMusic.muted = !gameThemeMusic.muted;
            audioControlButton.textContent = gameThemeMusic.muted ? 'üîá Unmute' : 'üîä Mute';
            saveGame();
        }

        // Salva o estado atual do jogo no Local Storage
        function saveGame() {
            const saveObject = {
                heroName,
                powerLevel,
                gold,
                currentExp,
                expToNextLevel,
                energy,
                soul,
                heroBaseATK,
                heroBaseHP,
                atkUpgradeCost,
                hpUpgradeCost,
                heroMaxHP,
                selectedClass,
                missionCooldowns,
                dailyMissionStatus,
                uniqueMissionStatus,
                currentVolume,
                isMuted: gameThemeMusic.muted
            };
            localStorage.setItem('blazeAndSteelSave', JSON.stringify(saveObject));
        }

        // Carrega o estado do jogo do Local Storage
        function loadGame(showMessage = false) {
            const savedData = localStorage.getItem('blazeAndSteelSave');
            if (savedData) {
                try {
                    const data = JSON.parse(savedData);

                    heroName = data.heroName || heroName;
                    powerLevel = data.powerLevel || 1;
                    gold = data.gold || 0;
                    currentExp = data.currentExp || 0;
                    expToNextLevel = data.expToNextLevel || 50;
                    energy = data.energy || 0;
                    soul = data.soul || 0;
                    heroBaseATK = data.heroBaseATK || 1;
                    heroBaseHP = data.heroBaseHP || 10;
                    atkUpgradeCost = data.atkUpgradeCost || 50;
                    hpUpgradeCost = data.hpUpgradeCost || 50;
                    heroMaxHP = data.heroMaxHP || 10; 
                    selectedClass = data.selectedClass || null;
                    missionCooldowns = data.missionCooldowns || missionCooldowns;
                    dailyMissionStatus = data.dailyMissionStatus || dailyMissionStatus;
                    uniqueMissionStatus = data.uniqueMissionStatus || uniqueMissionStatus;
                    
                    currentVolume = data.currentVolume !== undefined ? data.currentVolume : 1.0;
                    gameThemeMusic.volume = currentVolume;
                    gameThemeMusic.muted = data.isMuted !== undefined ? data.isMuted : false;
                    
                    if (selectedClass) {
                        startGame();
                        if (showMessage) alert(`Jogo carregado com sucesso! Bem-vindo de volta, ${heroName}!`);
                    } else {
                        // Se n√£o h√° classe, n√£o inicia o jogo, apenas mostra o menu.
                        if (showMessage) alert("Nenhum progresso encontrado. Comece um Novo Jogo!");
                        startMenu.style.display = 'flex';
                    }

                } catch (e) {
                    console.error("Erro ao carregar dados salvos:", e);
                    localStorage.removeItem('blazeAndSteelSave'); // Limpa dados corrompidos
                    if (showMessage) alert("Dados salvos corrompidos. Comece um Novo Jogo.");
                    startMenu.style.display = 'flex';
                }
            } else {
                if (showMessage) alert("Nenhum jogo salvo encontrado.");
                startMenu.style.display = 'flex';
            }
            updateDisplay();
            // A m√∫sica ser√° tocada ap√≥s a primeira intera√ß√£o (ex: clique em NOVO JOGO ou CARREGAR)
        }
        
        // Loop de tempo (Verifica cooldowns e salva o jogo)
        setInterval(() => {
            if (sidebar.style.display === 'block') {
                saveGame();
                updateMissionButtons();
            }
        }, 5000); 

        // ====================================================================
        // IV. FUN√á√ïES DE INICIALIZA√á√ÉO E CRIA√á√ÉO
        // ====================================================================

        function startGame() {
            startMenu.style.display = 'none';
            characterCreationPanel.style.display = 'none';
            sidebar.style.display = 'flex';
            mainContent.style.display = 'block';

            // Garante que o HP atual n√£o exceda o HP m√°ximo (p√≥s-load/cria√ß√£o)
            heroCurrentHP = Math.min(heroCurrentHP, heroMaxHP);

            showPanel('training-panel'); // Come√ßa no painel principal
            updateDisplay();
        }

        // Fun√ß√£o de utilidade para gera√ß√£o de bot√µes de classe
        function generateClassButtons() {
            classContainer.innerHTML = ''; 
            
            for (const key in CLASSES) {
                const cls = CLASSES[key];
                const button = document.createElement('button');
                button.textContent = cls.name;
                button.setAttribute('data-class-key', key);
                button.onclick = () => selectClass(key);
                
                // Adiciona o placeholder de imagem
                const img = document.createElement('img');
                img.src = cls.imagePath; // Caminho pode estar vazio, mas a tag existe
                img.alt = cls.name;
                
                // Adiciona um manipulador de erro para carregar as fotos
                img.onerror = function() {
                    this.style.backgroundColor = '#6c7a89';
                    this.outerHTML = `<div style="width: 80px; height: 80px; background-color: #6c7a89; line-height: 80px; font-size: 0.8em; margin-bottom: 5px; border-radius: 5px;">${cls.name.substring(0, 1)}?</div>`;
                };
                
                button.prepend(img);
                classContainer.appendChild(button);
            }
        }

        // Seleciona a classe
        function selectClass(key) {
            selectedClass = key;
            const cls = CLASSES[key];
            
            document.getElementById('selected-class-name').textContent = cls.name;
            document.getElementById('class-base-hp').textContent = cls.initialHP;
            document.getElementById('class-base-atk').textContent = cls.initialATK;
            document.getElementById('class-initial-energy').textContent = cls.initialEnergy;
            classDetailsPanel.querySelector('p:last-of-type').textContent = `"${cls.description}"`; 
            
            classDetailsPanel.style.display = 'block';
            confirmCreationButton.disabled = false;
            
            document.querySelectorAll('#class-selection-container button').forEach(btn => {
                btn.style.borderColor = btn.getAttribute('data-class-key') === key ? 'var(--color-accent)' : 'var(--color-primary)';
                btn.style.backgroundColor = btn.getAttribute('data-class-key') === key ? '#4f3655' : 'var(--color-secondary)';
            });
        }
        
        // Finaliza a cria√ß√£o e inicia o jogo
        function finalizeCreation() {
            if (!selectedClass) {
                alert("Por favor, selecione uma classe antes de come√ßar!");
                return;
            }
            
            const cls = CLASSES[selectedClass];
            
            heroBaseHP = cls.initialHP;
            heroBaseATK = cls.initialATK;
            heroCurrentHP = cls.initialHP;
            heroMaxHP = cls.initialHP;
            energy = cls.initialEnergy;
            heroImage = cls.imagePath || ""; 
            
            powerLevel = 1;
            currentExp = 0;
            expToNextLevel = 50;
            gold = 0;
            inventory = []; 
            
            const chosenName = heroNameInput.value.trim();
            if (chosenName) {
                heroName = chosenName;
            } else {
                heroName = `Her√≥i ${cls.name}`; 
            }
            
            characterCreationPanel.style.display = 'none'; 
            startGame(); 
            saveGame(); 
        }

        // Mostra o painel de cria√ß√£o de personagem
        function showCharacterCreation() {
            hasInteracted = true; 
            checkAndPlayMusic();
            
            startMenu.style.display = 'none'; 
            sidebar.style.display = 'none';
            mainContent.style.display = 'none';
            
            selectedClass = null;

            characterCreationPanel.style.display = 'flex'; 
            generateClassButtons();
        }

        // ====================================================================
        // V. FUN√á√ïES DE TREINAMENTO E PROGRESSO
        // ====================================================================
        
        // Treinamento
        function trainForStats(type) {
            const cost = 25;
            const expGain = 10;
            
            if (energy >= cost) {
                energy -= cost;
                currentExp += expGain;
                
                let trainingType = type === 'attack' ? 'T√°ticas' : 'Defesas';
                logToCombat(`Treinamento: ${trainingType} conclu√≠do! (+${expGain} EXP)`);
                
                updateDisplay();
                saveGame();
            } else {
                logToCombat("‚ö†Ô∏è Falha: N√£o h√° energia suficiente para treinar.");
            }
        }

        // Subir de N√≠vel
        function levelUp() {
            if (currentExp >= expToNextLevel) {
                currentExp -= expToNextLevel;
                powerLevel++;
                
                // Aumenta o custo de EXP
                expToNextLevel = Math.round(50 * Math.pow(1.5, powerLevel - 1));
                
                // Aumenta os stats
                heroBaseATK += 1;
                heroBaseHP += 10;
                heroMaxHP = heroBaseHP; // Atualiza o HP m√°ximo
                heroCurrentHP = heroMaxHP; // Cura completa
                energy = Math.min(energy + 50, 200 + (powerLevel * 50)); // Recupera e aumenta o m√°ximo (Exemplo)
                
                logToCombat(`üéâ Parab√©ns! Voc√™ subiu para o N√≠vel ${powerLevel}! (+1 ATK, +10 HP)`);
                
                updateDisplay();
                saveGame();
            }
        }
        
        // Compra de Upgrades
        function buyUpgrade(type) {
            if (type === 'atk' && gold >= atkUpgradeCost) {
                gold -= atkUpgradeCost;
                heroBaseATK += 1;
                atkUpgradeCost = Math.round(atkUpgradeCost * 1.5);
                logToCombat(`Upgrade de ATK comprado! ATK Base: ${heroBaseATK}`);
            } else if (type === 'hp' && gold >= hpUpgradeCost) {
                gold -= hpUpgradeCost;
                heroBaseHP += 10;
                heroMaxHP = heroBaseHP;
                heroCurrentHP = heroMaxHP;
                hpUpgradeCost = Math.round(hpUpgradeCost * 1.5);
                logToCombat(`Upgrade de HP comprado! HP Base: ${heroBaseHP}`);
            } else {
                logToCombat("‚ö†Ô∏è Falha: Ouro insuficiente.");
            }
            updateDisplay();
            saveGame();
        }


        // ====================================================================
        // VI. FUN√á√ïES DE MISS√ïES
        // ====================================================================

        function updateMissionButtons() {
            const now = Date.now();
            
            // Cooldowns de Recursos
            for (const key in missionCooldowns) {
                const button = document.getElementById(`${key}-button`);
                const cooldown = missionCooldowns[key];
                
                if (cooldown > now) {
                    button.disabled = true;
                    const remainingSeconds = Math.round((cooldown - now) / 1000);
                    button.textContent = button.textContent.split('(')[0].trim() + ` (${remainingSeconds}s)`;
                } else {
                    button.disabled = false;
                    button.textContent = button.textContent.split('(')[0].trim() + (key === 'provisions' ? ' (30s | Ganho: 50 ‚ö°)' : ' (60s | Ganho: 20 üí∞)');
                }
            }

            // Miss√µes Di√°rias
            for (const key in dailyMissionStatus) {
                const button = document.getElementById(`daily-${key}`);
                const completedAt = dailyMissionStatus[key].completedAt;

                if (now - completedAt < DAILY_COOLDOWN_MS) {
                    button.disabled = true;
                    const timeLeft = DAILY_COOLDOWN_MS - (now - completedAt);
                    const hours = Math.floor(timeLeft / (1000 * 60 * 60));
                    button.textContent = button.textContent.split('(')[0].trim() + ` (Dispon√≠vel em ${hours}h)`;
                } else {
                    button.disabled = false;
                    const rewardText = key === 'scouting' ? '(Recompensa: 100 EXP | 50 üí∞)' : '(Recompensa: 200 EXP | +2 ATK B√¥nus!)';
                    button.textContent = button.textContent.split('(')[0].trim() + ` ${rewardText}`;
                }
            }
            
            // Miss√µes √önicas
            for (const key in uniqueMissionStatus) {
                const button = document.getElementById(`unique-${key}`);
                if (uniqueMissionStatus[key].completed) {
                    if(button) button.style.display = 'none';
                } else {
                    if(button) button.style.display = 'block';
                }
            }
        }

        function startMission(type) {
            const now = Date.now();
            const cooldowns = { provisions: 30000, workGold: 60000 }; 
            
            if (missionCooldowns[type] > now) {
                return; 
            }

            missionCooldowns[type] = now + cooldowns[type];
            let rewardText = "";

            if (type === 'provisions') {
                energy += 50;
                rewardText = "+50 Energia";
            } else if (type === 'workGold') {
                gold += 20;
                rewardText = "+20 Ouro";
            }

            logToCombat(`Miss√£o: Coleta de recursos conclu√≠da! (${rewardText})`);
            updateDisplay();
            saveGame();
        }

        function startDailyMission(type) {
            const now = Date.now();
            if (now - dailyMissionStatus[type].completedAt < DAILY_COOLDOWN_MS) {
                return;
            }
            
            dailyMissionStatus[type].completedAt = now;
            
            if (type === 'scouting') {
                currentExp += 100;
                gold += 50;
                logToCombat("Miss√£o Di√°ria: Patrulha conclu√≠da! (+100 EXP, +50 üí∞)");
            } else if (type === 'drills') {
                currentExp += 200;
                heroBaseATK += 2;
                logToCombat("Miss√£o Di√°ria: Exerc√≠cios de Treinamento conclu√≠dos! (+200 EXP, +2 ATK Base)");
            }
            
            updateDisplay();
            saveGame();
        }

        function startUniqueMission(type) {
            if (uniqueMissionStatus[type].completed) {
                return;
            }
            
            uniqueMissionStatus[type].completed = true;
            
            if (type === 'firstQuest') {
                currentExp += 500;
                heroBaseHP += 10;
                heroMaxHP = heroBaseHP;
                heroCurrentHP = heroMaxHP;
                logToCombat("Miss√£o √önica: Prova de Valor conclu√≠da! (+500 EXP, +10 HP Base)");
            } else if (type === 'tutorialComplete') {
                gold += 100;
                energy += 100;
                logToCombat("Miss√£o √önica: Tutorial B√°sico finalizado! (+100 üí∞, +100 ‚ö°)");
            }
            
            updateDisplay();
            saveGame();
        }


        // ====================================================================
        // VII. FUN√á√ïES DE COMBATE
        // ====================================================================

        // Seleciona um monstro aleat√≥rio baseado no n√≠vel do her√≥i
        function selectMonsterByLevel() {
            const levelKey = Math.min(powerLevel, Object.keys(MONSTERS_BY_LEVEL).length);
            const availableMonsters = MONSTERS_BY_LEVEL[levelKey] || MONSTERS_BY_LEVEL[1];
            
            const monster = availableMonsters[Math.floor(Math.random() * availableMonsters.length)];
            
            // Cria uma c√≥pia com HP atual
            currentMonster = {
                ...monster,
                currentHP: monster.baseHP 
            };
            
            updateAdventurePanel();
        }

        function updateAdventurePanel() {
            if (!currentMonster) {
                selectMonsterByLevel();
            }
            
            if (currentMonster) {
                document.getElementById('monster-name').textContent = currentMonster.name;
                monsterHPDisplay.textContent = currentMonster.currentHP;
                document.getElementById('monster-hp-display').nextElementSibling.textContent = ` / ${currentMonster.baseHP}`;
                monsterATKDisplay.textContent = currentMonster.atk;
                document.getElementById('monster-reward-exp').textContent = currentMonster.expReward;
                document.getElementById('monster-reward-gold').textContent = currentMonster.goldReward;
                
                // Custo de energia e bot√£o de batalha
                startBattleButton.textContent = `Iniciar Batalha! (Custo: ${currentMonster.energyCost} ‚ö°)`;
                startBattleButton.disabled = isFighting || energy < currentMonster.energyCost || heroCurrentHP <= 0;
            } else {
                // Caso n√£o encontre monstro (deve ser raro)
                document.getElementById('monster-name').textContent = "Carregando...";
            }
            
            // Stats do Her√≥i
            const totalHeroATK = heroBaseATK; // Sem equipamento, √© o base.
            heroTotalATKDisplay.textContent = totalHeroATK;
            heroMaxHPDisplay.textContent = heroMaxHP;
            heroCurrentHPDisplay.textContent = heroCurrentHP;
            heroLevelMultiplierDisplay.textContent = powerLevel; 
        }

        function logToCombat(message) {
            const p = document.createElement('p');
            p.textContent = `[${new Date().toLocaleTimeString()}] ${message}`;
            combatLog.prepend(p); 
            if (combatLog.children.length > 20) {
                combatLog.removeChild(combatLog.lastChild);
            }
        }

        function startBattle() {
            if (isFighting || !currentMonster || energy < currentMonster.energyCost || heroCurrentHP <= 0) {
                logToCombat("‚ö†Ô∏è N√£o √© poss√≠vel iniciar a batalha. Verifique HP ou Energia.");
                return;
            }
            
            isFighting = true;
            energy -= currentMonster.energyCost;
            startBattleButton.disabled = true;
            
            logToCombat(`--- BATALHA CONTRA ${currentMonster.name} COME√áA! ---`);
            
            let heroDamage = heroBaseATK * powerLevel; // Multiplicador de n√≠vel
            let monsterDamage = currentMonster.atk;
            let turns = 0;
            
            // Loop de Combate Simples por Turnos
            while (currentMonster.currentHP > 0 && heroCurrentHP > 0 && turns < 100) {
                turns++;
                
                // Turno do Her√≥i
                currentMonster.currentHP -= heroDamage;
                logToCombat(`Voc√™ atacou! (-${heroDamage} HP no monstro)`);
                if (currentMonster.currentHP <= 0) {
                    currentMonster.currentHP = 0;
                    break;
                }
                
                // Turno do Monstro
                heroCurrentHP -= monsterDamage;
                logToCombat(`${currentMonster.name} atacou! (-${monsterDamage} HP em voc√™)`);
                if (heroCurrentHP <= 0) {
                    heroCurrentHP = 0;
                    break;
                }
            }
            
            endBattle();
        }

        function endBattle() {
            isFighting = false;
            
            if (heroCurrentHP > 0) {
                // Vit√≥ria
                gold += currentMonster.goldReward;
                currentExp += currentMonster.expReward;
                logToCombat(`üèÜ VIT√ìRIA! Voc√™ derrotou ${currentMonster.name}! (+${currentMonster.expReward} EXP, +${currentMonster.goldReward} üí∞)`);
                
                // Chance de drop de Alma (ex: 20%)
                if (Math.random() < 0.2) {
                    soul += 1;
                    logToCombat("‚ú® Voc√™ coletou 1 fragmento de Alma!");
                }
            } else {
                // Derrota
                // Garante que o HP n√£o seja negativo para exibi√ß√£o
                heroCurrentHP = 0; 
                logToCombat(`üíÄ DERROTA! Voc√™ foi derrotado por ${currentMonster.name}.`);
            }
            
            // Cura no Quartel-General (Simples para a vers√£o inicial)
            if (heroCurrentHP <= 0) {
                 logToCombat("Sua consci√™ncia retorna ao Quartel-General. Voc√™ precisa se curar.");
            }
            
            // Reseta para o pr√≥ximo monstro
            currentMonster = null;
            selectMonsterByLevel();
            
            updateDisplay();
            saveGame();
        }

        // ====================================================================
        // VIII. INVENT√ÅRIO (Placeholder Antigo)
        // ====================================================================
        
        // No c√≥digo restaurado, esta se√ß√£o fica vazia, pois voc√™ n√£o tinha fun√ß√µes aqui.

        // ====================================================================
        // IX. INICIALIZA√á√ÉO
        // ====================================================================
        
        // Tenta carregar o jogo salvo ao iniciar a p√°gina.
        loadGame();
        
    </script>

</body>
</html>
